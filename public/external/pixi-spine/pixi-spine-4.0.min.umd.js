/*!
 * @pixi-spine/all-4.0 - v3.1.0
 * Compiled Tue, 13 Sep 2022 14:28:12 UTC
 *
 * @pixi-spine/all-4.0 is licensed under SPINE-LICENSE
 * http://esotericsoftware.com/spine-runtimes-license
 *
 * Copyright 2019-2020, Ivan Igorevich Popelyshev <ivan.popelyshev@gmail.com>, All Rights Reserved
 */ this.PIXI=this.PIXI||{},this.PIXI.spine=this.PIXI.spine||{},function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@pixi/loaders"),require("@pixi/core"),require("@pixi/constants"),require("@pixi/math"),require("@pixi/display"),require("@pixi/sprite"),require("@pixi/mesh-extras"),require("@pixi/graphics"),require("@pixi/utils")):"function"==typeof define&&define.amd?define(["exports","@pixi/loaders","@pixi/core","@pixi/constants","@pixi/math","@pixi/display","@pixi/sprite","@pixi/mesh-extras","@pixi/graphics","@pixi/utils"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)._pixi_spine_all_={},t.PIXI,t.PIXI,t.PIXI,t.PIXI,t.PIXI,t.PIXI,t.PIXI,t.PIXI,t.PIXI.utils)}(this,function(t,e,r,n,a,i,s,o,h,l){"use strict";t.AttachmentType=void 0,(c=t.AttachmentType||(t.AttachmentType={}))[c.Region=0]="Region",c[c.BoundingBox=1]="BoundingBox",c[c.Mesh=2]="Mesh",c[c.LinkedMesh=3]="LinkedMesh",c[c.Path=4]="Path",c[c.Point=5]="Point",c[c.Clipping=6]="Clipping";var c,u,d,f,p,m,$=function(){function t(t,e,r,n){void 0===e&&(e=[]),void 0===r&&(r=0),void 0===n&&(n=new DataView(t.buffer)),this.strings=e,this.index=r,this.buffer=n}return t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readUnsignedByte=function(){return this.buffer.getUint8(this.index++)},t.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},t.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},t.prototype.readInt=function(t){var e=this.readByte(),r=127&e;return(128&e)!=0&&(r|=(127&(e=this.readByte()))<<7,(128&e)!=0&&(r|=(127&(e=this.readByte()))<<14,(128&e)!=0&&(r|=(127&(e=this.readByte()))<<21,(128&e)!=0&&(r|=(127&(e=this.readByte()))<<28)))),t?r:r>>>1^-(1&r)},t.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},t.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",r=0;r<t;){var n=this.readUnsignedByte();switch(n>>4){case 12:case 13:e+=String.fromCharCode((31&n)<<6|63&this.readByte()),r+=2;break;case 14:e+=String.fromCharCode((15&n)<<12|(63&this.readByte())<<6|63&this.readByte()),r+=3;break;default:e+=String.fromCharCode(n),r++}}return e},t.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},t.prototype.readBoolean=function(){return 0!=this.readByte()},t}();t.MixBlend=void 0,(u=t.MixBlend||(t.MixBlend={}))[u.setup=0]="setup",u[u.first=1]="first",u[u.replace=2]="replace",u[u.add=3]="add",t.MixDirection=void 0,(d=t.MixDirection||(t.MixDirection={}))[d.mixIn=0]="mixIn",d[d.mixOut=1]="mixOut",t.PositionMode=void 0,(f=t.PositionMode||(t.PositionMode={}))[f.Fixed=0]="Fixed",f[f.Percent=1]="Percent",t.RotateMode=void 0,(p=t.RotateMode||(t.RotateMode={}))[p.Tangent=0]="Tangent",p[p.Chain=1]="Chain",p[p.ChainScale=2]="ChainScale",t.TransformMode=void 0,(m=t.TransformMode||(t.TransformMode={}))[m.Normal=0]="Normal",m[m.OnlyTranslation=1]="OnlyTranslation",m[m.NoRotationOrReflection=2]="NoRotationOrReflection",m[m.NoScale=3]="NoScale",m[m.NoScaleOrReflection=4]="NoScaleOrReflection";/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */ var g=function(t,e){return(g=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function v(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function x(e){switch(e.toLowerCase()){case"nearest":return t.TextureFilter.Nearest;case"linear":return t.TextureFilter.Linear;case"mipmap":return t.TextureFilter.MipMap;case"mipmapnearestnearest":return t.TextureFilter.MipMapNearestNearest;case"mipmaplinearnearest":return t.TextureFilter.MipMapLinearNearest;case"mipmapnearestlinear":return t.TextureFilter.MipMapNearestLinear;case"mipmaplinearlinear":return t.TextureFilter.MipMapLinearLinear;default:throw Error("Unknown texture filter "+e)}}t.TextureFilter=void 0,(y=t.TextureFilter||(t.TextureFilter={}))[y.Nearest=9728]="Nearest",y[y.Linear=9729]="Linear",y[y.MipMap=9987]="MipMap",y[y.MipMapNearestNearest=9984]="MipMapNearestNearest",y[y.MipMapLinearNearest=9985]="MipMapLinearNearest",y[y.MipMapNearestLinear=9986]="MipMapNearestLinear",y[y.MipMapLinearLinear=9987]="MipMapLinearLinear",t.TextureWrap=void 0,(b=t.TextureWrap||(t.TextureWrap={}))[b.MirroredRepeat=33648]="MirroredRepeat",b[b.ClampToEdge=33071]="ClampToEdge",b[b.Repeat=10497]="Repeat";var y,b,_,w=function(){function t(){this.size=null,this.names=null,this.values=null,this.renderObject=null}return Object.defineProperty(t.prototype,"width",{get:function(){var t=this.texture;return t.trim?t.trim.width:t.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.texture;return t.trim?t.trim.height:t.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.spineOffsetY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){return this.texture.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){return this.texture.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"degrees",{get:function(){return(360-45*this.texture.rotate)%360},enumerable:!1,configurable:!0}),t}(),k=function t(){this.x=0,this.y=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.rotate=0,this.index=0},S=function(){function e(t,e,r){this.pages=[],this.regions=[],t&&this.addSpineAtlas(t,e,r)}return e.prototype.addTexture=function(e,r){for(var n=this.pages,a=null,i=0;i<n.length;i++)if(n[i].baseTexture===r.baseTexture){a=n[i];break}if(null===a){(a=new T).name="texturePage";var s=r.baseTexture;a.width=s.realWidth,a.height=s.realHeight,a.baseTexture=s,a.minFilter=a.magFilter=t.TextureFilter.Nearest,a.uWrap=t.TextureWrap.ClampToEdge,a.vWrap=t.TextureWrap.ClampToEdge,n.push(a)}var o=new B;return o.name=e,o.page=a,o.texture=r,o.index=-1,this.regions.push(o),o},e.prototype.addTextureHash=function(t,e){for(var r in t)t.hasOwnProperty(r)&&this.addTexture(e&&-1!==r.indexOf(".")?r.substr(0,r.lastIndexOf(".")):r,t[r])},e.prototype.addSpineAtlas=function(t,e,r){return this.load(t,e,r)},e.prototype.load=function(e,i,s){var o=this;if(null==i)throw Error("textureLoader cannot be null.");var h=new M(e),l=[,,,,],c=null,u={},d=null;u.size=function(){c.width=parseInt(l[1]),c.height=parseInt(l[2])},u.format=function(){},u.filter=function(){c.minFilter=x(l[1]),c.magFilter=x(l[2])},u.repeat=function(){-1!=l[1].indexOf("x")&&(c.uWrap=t.TextureWrap.Repeat),-1!=l[1].indexOf("y")&&(c.vWrap=t.TextureWrap.Repeat)},u.pma=function(){c.pma="true"==l[1]};var f={};f.xy=function(){d.x=parseInt(l[1]),d.y=parseInt(l[2])},f.size=function(){d.width=parseInt(l[1]),d.height=parseInt(l[2])},f.bounds=function(){d.x=parseInt(l[1]),d.y=parseInt(l[2]),d.width=parseInt(l[3]),d.height=parseInt(l[4])},f.offset=function(){d.offsetX=parseInt(l[1]),d.offsetY=parseInt(l[2])},f.orig=function(){d.originalWidth=parseInt(l[1]),d.originalHeight=parseInt(l[2])},f.offsets=function(){d.offsetX=parseInt(l[1]),d.offsetY=parseInt(l[2]),d.originalWidth=parseInt(l[3]),d.originalHeight=parseInt(l[4])},f.rotate=function(){var t=l[1],e=0;e="true"==t.toLocaleLowerCase()?6:"false"==t.toLocaleLowerCase()?0:(720-parseFloat(t))%360/45,d.rotate=e},f.index=function(){d.index=parseInt(l[1])};for(var p=h.readLine();null!=p&&0==p.trim().length;)p=h.readLine();for(;null!=p&&0!=p.trim().length&&0!=h.readEntry(l,p);)p=h.readLine();var m=function(){for(;;){if(null==p)return s&&s(o);if(0==p.trim().length)c=null,p=h.readLine();else if(null===c){for((c=new T).name=p.trim();0!=h.readEntry(l,p=h.readLine());){var t=u[l[0]];t&&t()}o.pages.push(c),i(c.name,function(t){if(null===t)return o.pages.splice(o.pages.indexOf(c),1),s&&s(null);c.baseTexture=t,c.pma&&(t.alphaMode=n.ALPHA_MODES.PMA),t.valid||t.setSize(c.width,c.height),c.setFilters(),c.width&&c.height||(c.width=t.realWidth,c.height=t.realHeight,c.width&&c.height||console.log("ERROR spine atlas page "+c.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),m()});break}else{d=new k;var e=new B;e.name=p,e.page=c;for(var $=null,g=null;;){var v=h.readEntry(l,p=h.readLine());if(0==v)break;var t=f[l[0]];if(t)t();else{null==$&&($=[],g=[]),$.push(l[0]);for(var x=[],y=0;y<v;y++)x.push(parseInt(l[y+1]));g.push(x)}}0==d.originalWidth&&0==d.originalHeight&&(d.originalWidth=d.width,d.originalHeight=d.height);var b=c.baseTexture.resolution;d.x/=b,d.y/=b,d.width/=b,d.height/=b,d.originalWidth/=b,d.originalHeight/=b,d.offsetX/=b,d.offsetY/=b;var _=d.rotate%4!=0,w=new a.Rectangle(d.x,d.y,_?d.height:d.width,_?d.width:d.height),S=new a.Rectangle(0,0,d.originalWidth,d.originalHeight),M=new a.Rectangle(d.offsetX,d.originalHeight-d.height-d.offsetY,d.width,d.height);e.texture=new r.Texture(e.page.baseTexture,w,S,M,d.rotate),e.index=d.index,e.texture.updateUvs(),o.regions.push(e)}}};m()},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},e}(),M=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readEntry=function(t,e){if(null==e||0==(e=e.trim()).length)return 0;var r=e.indexOf(":");if(-1==r)return 0;t[0]=e.substr(0,r).trim();for(var n=1,a=r+1;;n++){var i=e.indexOf(",",a);if(-1==i)return t[n]=e.substr(a).trim(),n;if(t[n]=e.substr(a,i-a).trim(),a=i+1,4==n)return 4}},t}(),T=function(){function e(){this.minFilter=t.TextureFilter.Nearest,this.magFilter=t.TextureFilter.Nearest,this.uWrap=t.TextureWrap.ClampToEdge,this.vWrap=t.TextureWrap.ClampToEdge}return e.prototype.setFilters=function(){var e=this.baseTexture,r=this.minFilter;r==t.TextureFilter.Linear?e.scaleMode=n.SCALE_MODES.LINEAR:this.minFilter==t.TextureFilter.Nearest?e.scaleMode=n.SCALE_MODES.NEAREST:(e.mipmap=n.MIPMAP_MODES.POW2,r==t.TextureFilter.MipMapNearestNearest?e.scaleMode=n.SCALE_MODES.NEAREST:e.scaleMode=n.SCALE_MODES.LINEAR)},e}(),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e}(w),C=(_=new Float32Array(1),function(t){return _[0]=t,_[0]}),I=Math.fround||C,A=function(){function t(){this.array=[]}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return void 0!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}(),Y=function(){function t(){this.entries={},this.size=0}return t.prototype.add=function(t){var e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)},t.prototype.addAll=function(t){for(var e=this.size,r=0,n=t.length;r<n;r++)this.add(t[r]);return e!=this.size},t.prototype.contains=function(t){return this.entries[t]},t.prototype.clear=function(){this.entries={},this.size=0},t}(),F=function(){function t(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),this.r=t,this.g=e,this.b=r,this.a=n}return t.prototype.set=function(t,e,r,n){return this.r=t,this.g=e,this.b=r,this.a=n,this.clamp()},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this},t.prototype.add=function(t,e,r,n){return this.r+=t,this.g+=e,this.b+=r,this.a+=n,this.clamp()},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.rgba8888ToColor=function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255},t.rgb888ToColor=function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255},t.fromString=function(e){return new t().setFromString(e)},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}(),X=function(){function t(){}return t.clamp=function(t,e,r){return t<e?e:t>r?r:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>0?1:t<0?-1:0},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.randomTriangular=function(e,r){return t.randomTriangularWith(e,r,(e+r)*.5)},t.randomTriangularWith=function(t,e,r){var n=Math.random(),a=e-t;return n<=(r-t)/a?t+Math.sqrt(n*a*(r-t)):e-Math.sqrt((1-n)*a*(e-r))},t.isPowerOfTwo=function(t){return t&&(t&t-1)==0},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}(),P=function(){function t(){}return t.prototype.apply=function(t,e,r){return t+(e-t)*this.applyInternal(r)},t}(),R=function(t){function e(e){var r=t.call(this)||this;return r.power=2,r.power=e,r}return v(e,t),e.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow((t-1)*2,this.power)/(this.power%2==0?-2:2)+1},e}(P),D=function(t){function e(e){return t.call(this,e)||this}return v(e,t),e.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},e}(R),L=function(){function t(){}return t.arrayCopy=function(t,e,r,n,a){for(var i=e,s=n;i<e+a;i++,s++)r[s]=t[i]},t.arrayFill=function(t,e,r,n){for(var a=e;a<r;a++)t[a]=n},t.setArraySize=function(t,e,r){void 0===r&&(r=0);var n=t.length;if(n==e)return t;if(t.length=e,n<e)for(var a=n;a<e;a++)t[a]=r;return t},t.ensureArrayCapacity=function(e,r,n){return(void 0===n&&(n=0),e.length>=r)?e:t.setArraySize(e,r,n)},t.newArray=function(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=e;return r},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var r=Array(e),n=0;n<r.length;n++)r[n]=0;return r},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var r=Array(e),n=0;n<r.length;n++)r[n]=0;return r},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?I(e):e},t.webkit602BugfixHelper=function(t,e){},t.contains=function(t,e,r){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},t.enumValue=function(t,e){return t[e[0].toUpperCase()+e.slice(1)]},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}(),E=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var r=t.bones[e],n=r.matrix;console.log(r.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.tx+", "+n.ty)}},t}(),V=function(){function t(t){this.items=[],this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)this.free(t[e])},t.prototype.clear=function(){this.items.length=0},t}(),N=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}(),O=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}(),W=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}(),U=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=[],this.polygons=[],this.polygonPool=new V(function(){return L.newFloatArray(16)})}return e.prototype.update=function(e,r){if(!e)throw Error("skeleton cannot be null.");var n=this.boundingBoxes,a=this.polygons,i=this.polygonPool,s=e.slots,o=s.length;n.length=0,i.freeAll(a),a.length=0;for(var h=0;h<o;h++){var l=s[h];if(l.bone.active){var c=l.getAttachment();if(null!=c&&c.type===t.AttachmentType.BoundingBox){var u=c;n.push(u);var d=i.obtain();d.length!=u.worldVerticesLength&&(d=L.newFloatArray(u.worldVerticesLength)),a.push(d),u.computeWorldVertices(l,0,u.worldVerticesLength,d,0,2)}}}r?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,a=this.polygons,i=0,s=a.length;i<s;i++)for(var o=a[i],h=o,l=0,c=o.length;l<c;l+=2){var u=h[l],d=h[l+1];t=Math.min(t,u),e=Math.min(e,d),r=Math.max(r,u),n=Math.max(n,d)}this.minX=t,this.minY=e,this.maxX=r,this.maxY=n},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,r,n){var a=this.minX,i=this.minY,s=this.maxX,o=this.maxY;if(t<=a&&r<=a||e<=i&&n<=i||t>=s&&r>=s||e>=o&&n>=o)return!1;var h=(n-e)/(r-t),l=h*(a-t)+e;if(l>i&&l<o||(l=h*(s-t)+e)>i&&l<o)return!0;var c=(i-e)/h+t;return!!(c>a)&&!!(c<s)||!!((c=(o-e)/h+t)>a)&&!!(c<s)},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var r=this.polygons,n=0,a=r.length;n<a;n++)if(this.containsPointPolygon(r[n],t,e))return this.boundingBoxes[n];return null},e.prototype.containsPointPolygon=function(t,e,r){for(var n=t,a=t.length,i=a-2,s=!1,o=0;o<a;o+=2){var h=n[o+1],l=n[i+1];if(h<r&&l>=r||l<r&&h>=r){var c=n[o];c+(r-h)/(l-h)*(n[i]-c)<e&&(s=!s)}i=o}return s},e.prototype.intersectsSegment=function(t,e,r,n){for(var a=this.polygons,i=0,s=a.length;i<s;i++)if(this.intersectsSegmentPolygon(a[i],t,e,r,n))return this.boundingBoxes[i];return null},e.prototype.intersectsSegmentPolygon=function(t,e,r,n,a){for(var i=t,s=t.length,o=e-n,h=r-a,l=e*a-r*n,c=i[s-2],u=i[s-1],d=0;d<s;d+=2){var f=i[d],p=i[d+1],m=c*p-u*f,$=c-f,g=u-p,v=o*g-h*$,x=(l*$-o*m)/v;if((x>=c&&x<=f||x>=f&&x<=c)&&(x>=e&&x<=n||x>=n&&x<=e)){var y=(l*g-h*m)/v;if((y>=u&&y<=p||y>=p&&y<=u)&&(y>=r&&y<=a||y>=a&&y<=r))return!0}c=f,u=p}return!1},e.prototype.getPolygon=function(t){if(!t)throw Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return -1==e?null:this.polygons[e]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}(),q={yDown:!0,FAIL_ON_NON_EXISTING_SKIN:!1,GLOBAL_AUTO_UPDATE:!0,GLOBAL_DELAY_LIMIT:0},z=[0,0,0],G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.region=null,e.attachment=null,e}return v(e,t),e}(s.Sprite),H=function(t){function e(e,r,n,a,i){var s=t.call(this,e,r,n,a,i)||this;return s.region=null,s.attachment=null,s}return v(e,t),e}(o.SimpleMesh),j=function(e){function r(r){var n=e.call(this)||this;if(!r)throw Error("The spineData param is required.");if("string"==typeof r)throw Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');n.spineData=r,n.createSkeleton(r),n.slotContainers=[],n.tempClipContainers=[];for(var a=0,i=n.skeleton.slots.length;a<i;a++){var s=n.skeleton.slots[a],o=s.getAttachment(),h=n.newContainer();if(n.slotContainers.push(h),n.addChild(h),n.tempClipContainers.push(null),o){if(o.type===t.AttachmentType.Region){var l=o.name,c=n.createSprite(s,o,l);s.currentSprite=c,s.currentSpriteName=l,h.addChild(c)}else if(o.type===t.AttachmentType.Mesh){var u=n.createMesh(s,o);s.currentMesh=u,s.currentMeshId=o.id,s.currentMeshName=o.name,h.addChild(u)}else o.type===t.AttachmentType.Clipping&&(n.createGraphics(s,o),h.addChild(s.clippingContainer),h.addChild(s.currentGraphics))}}return n.tintRgb=new Float32Array([1,1,1]),n.autoUpdate=!0,n.visible=!0,n}return v(r,e),Object.defineProperty(r.prototype,"debug",{get:function(){return this._debug},set:function(t){var e;t!=this._debug&&(null===(e=this._debug)||void 0===e||e.unregisterSpine(this),null==t||t.registerSpine(this),this._debug=t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,this.updateTransform=t?r.prototype.autoUpdateTransform:i.Container.prototype.updateTransform)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return l.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=l.hex2rgb(t,this.tintRgb)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"delayLimit",{get:function(){return(void 0!==this.localDelayLimit?this.localDelayLimit:q.GLOBAL_DELAY_LIMIT)||Number.MAX_VALUE},enumerable:!1,configurable:!0}),r.prototype.update=function(e){var r,n=this.delayLimit;if(e>n&&(e=n),this.state.update(e),this.state.apply(this.skeleton),this.skeleton){this.skeleton.updateWorldTransform();var i=this.skeleton.slots,s=this.color,o=null,h=null;s?(o=s.light,h=s.dark):o=this.tintRgb;for(var c=0,u=i.length;c<u;c++){var d=i[c],f=d.getAttachment(),p=this.slotContainers[c];if(!f){p.visible=!1;continue}var m=null;f.sequence&&f.sequence.apply(d,f);var $=f.region,g=f.color;switch(null!=f&&f.type){case t.AttachmentType.Region:if(p.transform.setFromMatrix(d.bone.matrix),$=f.region,d.currentMesh&&(d.currentMesh.visible=!1,d.currentMesh=null,d.currentMeshId=void 0,d.currentMeshName=void 0),!$){d.currentSprite&&(d.currentSprite.renderable=!1);break}if(!d.currentSpriteName||d.currentSpriteName!==f.name){var v=f.name;if(d.currentSprite&&(d.currentSprite.visible=!1),d.sprites=d.sprites||{},void 0!==d.sprites[v])d.sprites[v].visible=!0;else{var x=this.createSprite(d,f,v);p.addChild(x)}d.currentSprite=d.sprites[v],d.currentSpriteName=v}d.currentSprite.renderable=!0,d.hackRegion||this.setSpriteRegion(f,d.currentSprite,$),d.currentSprite.color?m=d.currentSprite.color:(z[0]=o[0]*d.color.r*g.r,z[1]=o[1]*d.color.g*g.g,z[2]=o[2]*d.color.b*g.b,d.currentSprite.tint=l.rgb2hex(z)),d.currentSprite.blendMode=d.blendMode;break;case t.AttachmentType.Mesh:if(d.currentSprite){d.currentSprite.visible=!1,d.currentSprite=null,d.currentSpriteName=void 0;var y=new a.Transform;y._parentID=-1,y._worldID=p.transform._worldID,p.transform=y}if(!$){d.currentMesh&&(d.currentMesh.renderable=!1);break}var b=f.id;if(void 0===d.currentMeshId||d.currentMeshId!==b){var _=b;if(d.currentMesh&&(d.currentMesh.visible=!1),d.meshes=d.meshes||{},void 0!==d.meshes[_])d.meshes[_].visible=!0;else{var w=this.createMesh(d,f);p.addChild(w)}d.currentMesh=d.meshes[_],d.currentMeshName=f.name,d.currentMeshId=_}d.currentMesh.renderable=!0,f.computeWorldVerticesOld(d,d.currentMesh.vertices),d.currentMesh.color?m=d.currentMesh.color:(z[0]=o[0]*d.color.r*g.r,z[1]=o[1]*d.color.g*g.g,z[2]=o[2]*d.color.b*g.b,d.currentMesh.tint=l.rgb2hex(z)),d.currentMesh.blendMode=d.blendMode,d.hackRegion||this.setMeshRegion(f,d.currentMesh,$);break;case t.AttachmentType.Clipping:d.currentGraphics||(this.createGraphics(d,f),p.addChild(d.clippingContainer),p.addChild(d.currentGraphics)),this.updateGraphics(d,f),p.alpha=1,p.visible=!0;continue;default:p.visible=!1;continue}if(p.visible=!0,m){var k=d.color.r*g.r,S=d.color.g*g.g,M=d.color.b*g.b;m.setLight(o[0]*k+h[0]*(1-k),o[1]*S+h[1]*(1-S),o[2]*M+h[2]*(1-M)),d.darkColor?(k=d.darkColor.r,S=d.darkColor.g,M=d.darkColor.b):(k=0,S=0,M=0),m.setDark(o[0]*k+h[0]*(1-k),o[1]*S+h[1]*(1-S),o[2]*M+h[2]*(1-M))}p.alpha=d.color.a}for(var T=this.skeleton.drawOrder,B=null,C=null,c=0,u=T.length;c<u;c++){var d=i[T[c].data.index],p=this.slotContainers[T[c].data.index];if(C||null===p.parent||p.parent===this||(p.parent.removeChild(p),p.parent=this),d.currentGraphics&&d.getAttachment())C=d.clippingContainer,B=d.getAttachment(),C.children.length=0,this.children[c]=p,B.endSlot===d.data&&(B.endSlot=null);else if(C){var I=this.tempClipContainers[c];I||((I=this.tempClipContainers[c]=this.newContainer()).visible=!1),this.children[c]=I,p.parent=null,C.addChild(p),B.endSlot==d.data&&(C.renderable=!0,C=null,B=null)}else this.children[c]=p}null===(r=this._debug)||void 0===r||r.renderDebug(this)}},r.prototype.setSpriteRegion=function(t,e,r){(e.attachment!==t||e.region!==r)&&(e.region=r,e.attachment=t,e.texture=r.texture,e.rotation=t.rotation*X.degRad,e.position.x=t.x,e.position.y=t.y,e.alpha=t.color.a,r.size?(e.scale.x=r.size.width/r.originalWidth,e.scale.y=-r.size.height/r.originalHeight):(e.scale.x=t.scaleX*t.width/r.originalWidth,e.scale.y=-t.scaleY*t.height/r.originalHeight))},r.prototype.setMeshRegion=function(t,e,r){(e.attachment!==t||e.region!==r)&&(e.region=r,e.attachment=t,e.texture=r.texture,r.texture.updateUvs(),e.uvBuffer.update(t.regionUVs))},r.prototype.autoUpdateTransform=function(){if(q.GLOBAL_AUTO_UPDATE){this.lastTime=this.lastTime||Date.now();var t=(Date.now()-this.lastTime)*.001;this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;i.Container.prototype.updateTransform.call(this)},r.prototype.createSprite=function(t,e,r){var n=e.region;t.hackAttachment===e&&(n=t.hackRegion);var a=n?n.texture:null,i=this.newSprite(a);return i.anchor.set(.5),n&&this.setSpriteRegion(e,i,e.region),t.sprites=t.sprites||{},t.sprites[r]=i,i},r.prototype.createMesh=function(t,e){var r=e.region;t.hackAttachment===e&&(r=t.hackRegion,t.hackAttachment=null,t.hackRegion=null);var a=this.newMesh(r?r.texture:null,new Float32Array(e.regionUVs.length),e.regionUVs,new Uint16Array(e.triangles),n.DRAW_MODES.TRIANGLES);return void 0!==a._canvasPadding&&(a._canvasPadding=1.5),a.alpha=e.color.a,a.region=e.region,r&&this.setMeshRegion(e,a,r),t.meshes=t.meshes||{},t.meshes[e.id]=a,a},r.prototype.createGraphics=function(t,e){var r=this.newGraphics(),n=new a.Polygon([]);return r.clear(),r.beginFill(16777215,1),r.drawPolygon(n),r.renderable=!1,t.currentGraphics=r,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,r},r.prototype.updateGraphics=function(t,e){var r=t.currentGraphics.geometry,n=r.graphicsData[0].shape.points,a=e.worldVerticesLength;n.length=a,e.computeWorldVertices(t,0,a,n,0,2),r.invalidate()},r.prototype.hackTextureBySlotIndex=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=null);var n=this.skeleton.slots[t];if(!n)return!1;var a=n.getAttachment(),i=a.region;return e?((i=new w).texture=e,i.size=r,n.hackRegion=i,n.hackAttachment=a):(n.hackRegion=null,n.hackAttachment=null),n.currentSprite?this.setSpriteRegion(a,n.currentSprite,i):n.currentMesh&&this.setMeshRegion(a,n.currentMesh,i),!0},r.prototype.hackTextureBySlotName=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=null);var n=this.skeleton.findSlotIndex(t);return -1!=n&&this.hackTextureBySlotIndex(n,e,r)},r.prototype.hackTextureAttachment=function(t,e,r,n){void 0===n&&(n=null);var a=this.skeleton.findSlotIndex(t),i=this.skeleton.getAttachmentByName(t,e);i.region.texture=r;var s=this.skeleton.slots[a];if(!s)return!1;var o=s.getAttachment();if(e===o.name){var h=i.region;return r?((h=new w).texture=r,h.size=n,s.hackRegion=h,s.hackAttachment=o):(s.hackRegion=null,s.hackAttachment=null),s.currentSprite&&s.currentSprite.region!=h?(this.setSpriteRegion(o,s.currentSprite,h),s.currentSprite.region=h):s.currentMesh&&s.currentMesh.region!=h&&this.setMeshRegion(o,s.currentMesh,h),!0}return!1},r.prototype.newContainer=function(){return new i.Container},r.prototype.newSprite=function(t){return new G(t)},r.prototype.newGraphics=function(){return new h.Graphics},r.prototype.newMesh=function(t,e,r,n,a){return new H(t,e,r,n,a)},r.prototype.transformHack=function(){return 1},r.prototype.hackAttachmentGroups=function(t,e,r){if(t){for(var n=[],a=[],i=0,s=this.skeleton.slots.length;i<s;i++){var o=this.skeleton.slots[i],h=o.currentSpriteName||o.currentMeshName||"",l=o.currentSprite||o.currentMesh;h.endsWith(t)?(l.parentGroup=e,a.push(l)):r&&l&&(l.parentGroup=r,n.push(l))}return[n,a]}},r.prototype.destroy=function(t){this.debug=null;for(var r=0,n=this.skeleton.slots.length;r<n;r++){var a=this.skeleton.slots[r];for(var i in a.meshes)a.meshes[i].destroy(t);for(var s in a.meshes=null,a.sprites)a.sprites[s].destroy(t);a.sprites=null}for(var r=0,n=this.slotContainers.length;r<n;r++)this.slotContainers[r].destroy(t);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,e.prototype.destroy.call(this,t)},r.clippingPolygon=[],r}(i.Container);Object.defineProperty(j.prototype,"visible",{get:function(){return this._visible},set:function(t){t!==this._visible&&(this._visible=t,t&&(this.lastTime=0))}});var J=function(){function e(){this.registeredSpines=new Map,this.drawDebug=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawBones=!0,this.drawPaths=!0,this.drawBoundingBoxes=!0,this.drawClipping=!0,this.drawRegionAttachments=!0,this.lineWidth=1,this.regionAttachmentsColor=30975,this.meshHullColor=30975,this.meshTrianglesColor=16763904,this.clippingPolygonColor=16711935,this.boundingBoxesRectColor=65280,this.boundingBoxesPolygonColor=65280,this.boundingBoxesCircleColor=65280,this.pathsCurveColor=16711680,this.pathsLineColor=16711935,this.skeletonXYColor=16711680,this.bonesColor=61132}return e.prototype.registerSpine=function(t){this.registeredSpines.has(t)&&console.warn("SpineDebugRenderer.registerSpine() - this spine is already registered!",t);var e={parentDebugContainer:new i.Container,bones:new i.Container,skeletonXY:new h.Graphics,regionAttachmentsShape:new h.Graphics,meshTrianglesLine:new h.Graphics,meshHullLine:new h.Graphics,clippingPolygon:new h.Graphics,boundingBoxesRect:new h.Graphics,boundingBoxesCircle:new h.Graphics,boundingBoxesPolygon:new h.Graphics,pathsCurve:new h.Graphics,pathsLine:new h.Graphics};e.parentDebugContainer.addChild(e.bones),e.parentDebugContainer.addChild(e.skeletonXY),e.parentDebugContainer.addChild(e.regionAttachmentsShape),e.parentDebugContainer.addChild(e.meshTrianglesLine),e.parentDebugContainer.addChild(e.meshHullLine),e.parentDebugContainer.addChild(e.clippingPolygon),e.parentDebugContainer.addChild(e.boundingBoxesRect),e.parentDebugContainer.addChild(e.boundingBoxesCircle),e.parentDebugContainer.addChild(e.boundingBoxesPolygon),e.parentDebugContainer.addChild(e.pathsCurve),e.parentDebugContainer.addChild(e.pathsLine),t.addChild(e.parentDebugContainer),this.registeredSpines.set(t,e)},e.prototype.renderDebug=function(t){this.registeredSpines.has(t)||this.registerSpine(t);var e=this.registeredSpines.get(t);e.skeletonXY.clear(),e.regionAttachmentsShape.clear(),e.meshTrianglesLine.clear(),e.meshHullLine.clear(),e.clippingPolygon.clear(),e.boundingBoxesRect.clear(),e.boundingBoxesCircle.clear(),e.boundingBoxesPolygon.clear(),e.pathsCurve.clear(),e.pathsLine.clear();for(var r=e.bones.children.length;r>0;r--)e.bones.children[r-1].destroy({children:!0,texture:!0,baseTexture:!0});var n=t.scale.x||t.scale.y||1,a=this.lineWidth/n;this.drawBones&&this.drawBonesFunc(t,e,a,n),this.drawPaths&&this.drawPathsFunc(t,e,a),this.drawBoundingBoxes&&this.drawBoundingBoxesFunc(t,e,a),this.drawClipping&&this.drawClippingFunc(t,e,a),(this.drawMeshHull||this.drawMeshTriangles)&&this.drawMeshHullAndMeshTriangles(t,e,a),this.drawRegionAttachments&&this.drawRegionAttachmentsFunc(t,e,a)},e.prototype.drawBonesFunc=function(t,e,r,n){var a=t.skeleton,i=a.x,s=a.y,o=a.bones;e.skeletonXY.lineStyle(r,this.skeletonXYColor,1);for(var l=0,c=o.length;l<c;l++){var u=o[l],d=u.data.length,f=i+u.matrix.tx,p=s+u.matrix.ty,m=i+d*u.matrix.a+u.matrix.tx,$=s+d*u.matrix.b+u.matrix.ty;if("root"!==u.data.name&&null!==u.data.parent){var g=Math.abs(p-$),v=Math.pow(Math.abs(f-m),2),x=g,y=Math.pow(g,2),b=Math.sqrt(v+y),_=Math.PI/180,w=Math.acos((Math.pow(b,2)+y-v)/(2*x*b))||0;if(0!==b){var k=new h.Graphics;e.bones.addChild(k);var S=b/50/n;k.beginFill(this.bonesColor,1),k.drawPolygon(0,0,0-S,b-3*S,0,b-S,0+S,b-3*S),k.endFill(),k.x=f,k.y=p,k.pivot.y=b;var M=0;f<m&&p<$?M=-w+180*_:f>m&&p<$?M=180*_+w:f>m&&p>$?M=-w:f<m&&p>$?M=w:p===$&&f<m?M=90*_:p===$&&f>m?M=-90*_:f===m&&p<$?M=180*_:f===m&&p>$&&(M=0),k.rotation=M,k.lineStyle(r+S/2.4,this.bonesColor,1),k.beginFill(0,.6),k.drawCircle(0,b,1.2*S),k.endFill()}}}var T=3*r;e.skeletonXY.moveTo(i-T,s-T),e.skeletonXY.lineTo(i+T,s+T),e.skeletonXY.moveTo(i+T,s-T),e.skeletonXY.lineTo(i-T,s+T)},e.prototype.drawRegionAttachmentsFunc=function(e,r,n){var a=e.skeleton.slots;r.regionAttachmentsShape.lineStyle(n,this.regionAttachmentsColor,1);for(var i=0,s=a.length;i<s;i++){var o=a[i],h=o.getAttachment();if(null!=h&&h.type===t.AttachmentType.Region){var l=h,c=new Float32Array(8);null==l||l.updateOffset(),l.computeWorldVertices(o,c,0,2),r.regionAttachmentsShape.drawPolygon(Array.from(c.slice(0,8)))}}},e.prototype.drawMeshHullAndMeshTriangles=function(e,r,n){var a=e.skeleton.slots;r.meshHullLine.lineStyle(n,this.meshHullColor,1),r.meshTrianglesLine.lineStyle(n,this.meshTrianglesColor,1);for(var i=0,s=a.length;i<s;i++){var o=a[i];if(o.bone.active){var h=o.getAttachment();if(null!=h&&h.type===t.AttachmentType.Mesh){var l=h,c=new Float32Array(l.worldVerticesLength),u=l.triangles,d=l.hullLength;if(l.computeWorldVertices(o,0,l.worldVerticesLength,c,0,2),this.drawMeshTriangles)for(var f=0,p=u.length;f<p;f+=3){var m=2*u[f],$=2*u[f+1],g=2*u[f+2];r.meshTrianglesLine.moveTo(c[m],c[m+1]),r.meshTrianglesLine.lineTo(c[$],c[$+1]),r.meshTrianglesLine.lineTo(c[g],c[g+1])}if(this.drawMeshHull&&d>0)for(var v=c[(d=(d>>1)*2)-2],x=c[d-1],y=0,b=d;y<b;y+=2){var _=c[y],w=c[y+1];r.meshHullLine.moveTo(_,w),r.meshHullLine.lineTo(v,x),v=_,x=w}}}}},e.prototype.drawClippingFunc=function(e,r,n){var a=e.skeleton.slots;r.clippingPolygon.lineStyle(n,this.clippingPolygonColor,1);for(var i=0,s=a.length;i<s;i++){var o=a[i];if(o.bone.active){var h=o.getAttachment();if(null!=h&&h.type===t.AttachmentType.Clipping){var l=h,c=l.worldVerticesLength,u=new Float32Array(c);l.computeWorldVertices(o,0,c,u,0,2),r.clippingPolygon.drawPolygon(Array.from(u))}}}},e.prototype.drawBoundingBoxesFunc=function(t,e,r){var n=this;e.boundingBoxesRect.lineStyle(r,this.boundingBoxesRectColor,5);var a=new U;a.update(t.skeleton,!0),e.boundingBoxesRect.drawRect(a.minX,a.minY,a.getWidth(),a.getHeight());for(var i=a.polygons,s=0,o=i.length;s<o;s++){var h=i[s];!function(t,a,i){if(e.boundingBoxesPolygon.lineStyle(r,n.boundingBoxesPolygonColor,1),e.boundingBoxesPolygon.beginFill(n.boundingBoxesPolygonColor,.1),i<3)throw Error("Polygon must contain at least 3 vertices");for(var s=[],o=2*r,h=0,l=t.length;h<l;h+=2){var c=t[h],u=t[h+1];e.boundingBoxesCircle.lineStyle(0),e.boundingBoxesCircle.beginFill(n.boundingBoxesCircleColor),e.boundingBoxesCircle.drawCircle(c,u,o),e.boundingBoxesCircle.endFill(),s.push(c,u)}e.boundingBoxesPolygon.drawPolygon(s),e.boundingBoxesPolygon.endFill()}(h,0,h.length)}},e.prototype.drawPathsFunc=function(e,r,n){var a=e.skeleton.slots;r.pathsCurve.lineStyle(n,this.pathsCurveColor,1),r.pathsLine.lineStyle(n,this.pathsLineColor,1);for(var i=0,s=a.length;i<s;i++){var o=a[i];if(o.bone.active){var h=o.getAttachment();if(null!=h&&h.type===t.AttachmentType.Path){var l=h,c=l.worldVerticesLength,u=new Float32Array(c);l.computeWorldVertices(o,0,c,u,0,2);var d=u[2],f=u[3],p=0,m=0;if(l.closed){var $=u[0],g=u[1],v=u[c-2],x=u[c-1];p=u[c-4],m=u[c-3],r.pathsCurve.moveTo(d,f),r.pathsCurve.bezierCurveTo($,g,v,x,p,m),r.pathsLine.moveTo(d,f),r.pathsLine.lineTo($,g),r.pathsLine.moveTo(p,m),r.pathsLine.lineTo(v,x)}c-=4;for(var y=4;y<c;y+=6){var $=u[y],g=u[y+1],v=u[y+2],x=u[y+3];p=u[y+4],m=u[y+5],r.pathsCurve.moveTo(d,f),r.pathsCurve.bezierCurveTo($,g,v,x,p,m),r.pathsLine.moveTo(d,f),r.pathsLine.lineTo($,g),r.pathsLine.moveTo(p,m),r.pathsLine.lineTo(v,x),d=p,f=m}}}}},e.prototype.unregisterSpine=function(t){this.registeredSpines.has(t)||console.warn("SpineDebugRenderer.unregisterSpine() - spine is not registered, can't unregister!",t),this.registeredSpines.get(t).parentDebugContainer.destroy({baseTexture:!0,children:!0,texture:!0}),this.registeredSpines.delete(t)},e}();e.LoaderResource.setExtensionXhrType("skel",e.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var K=function(){function t(){}return t.prototype.genMiddleware=function(){var t=this;return{use:function(r,a){if(!r.data)return a();var i,s,o=(i=r).type===e.LoaderResource.TYPE.JSON&&r.data.bones,h=(s=r).xhrType===e.LoaderResource.XHR_RESPONSE_TYPE.BUFFER&&("skel"===r.extension||r.metadata&&r.metadata.spineMetadata);if(!o&&!h)return a();var l=null,c=r.data;o?l=t.createJsonParser():(l=t.createBinaryParser(),r.data instanceof ArrayBuffer&&(c=new Uint8Array(r.data)));var u=r.metadata||{},d=u?u.spineSkeletonScale:null;d&&(l.scale=d);var f=u.spineAtlas;if(!1===f)return a();if(f&&f.pages)return t.parseData(r,l,f,c),a();var p=u.spineAtlasSuffix||".atlas",m=r.url,$=m.indexOf("?");$>0&&(m=m.substr(0,$)),m=m.substr(0,m.lastIndexOf("."))+p,u.spineAtlasFile&&(m=u.spineAtlasFile),m=m.replace(this.baseUrl,"");var g,v,x,y,b={crossOrigin:r.crossOrigin,xhrType:e.LoaderResource.XHR_RESPONSE_TYPE.TEXT,metadata:u.spineMetadata||null,parentResource:r},_={crossOrigin:r.crossOrigin,metadata:u.imageMetadata||null,parentResource:r},w=r.url.substr(0,r.url.lastIndexOf("/")+1);w=w.replace(this.baseUrl,"");var k=u.imageNamePrefix||r.name+"_atlas_page_",M=u.images?Z(u.images):u.image?Z({default:u.image}):u.imageLoader?u.imageLoader(this,k,w,_):(g=this,v=k,x=w,y=_,x&&x.lastIndexOf("/")!==x.length-1&&(x+="/"),function(t,e){var r=v+t,a=x+t,i=g.resources[r];if(i){var s=function(){e(i.texture.baseTexture)};i.texture?s():i.onAfterMiddleware.add(s)}else g.add(r,a,y,function(r){r.error?e(null):(t.indexOf("-pma.")>=0&&(r.texture.baseTexture.alphaMode=n.ALPHA_MODES.PMA),e(r.texture.baseTexture))})});function T(e){new S(e,M,function(e){e&&t.parseData(r,l,e,c),a()})}u.atlasRawData?T(u.atlasRawData):this.add(r.name+"_atlas",m,b,function(t){t.error?a():T(t.data)})}}},t}();function Q(t,e){return t&&t.lastIndexOf("/")!==t.length-1&&(t+="/"),function(t,n){n(r.BaseTexture.from(t,e))}}function Z(t){return function(e,r){var n=t[e]||t.default;r(n&&n.baseTexture?n.baseTexture:n)}}/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */ var tt=function(t,e){return(tt=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function te(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}tt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var tr,tn=function t(e){if(!e)throw Error("name cannot be null.");this.name=e},ta=function(t){function e(r){var n=t.call(this,r)||this;return n.id=e.nextID++,n.worldVerticesLength=0,n.deformAttachment=n,n}return te(e,t),e.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},e.prototype.computeWorldVertices=function(t,e,r,n,a,i){r=a+(r>>1)*i;var s=t.bone.skeleton,o=t.deform,h=this.vertices,l=this.bones;if(!l){o.length>0&&(h=o);for(var c=t.bone.matrix,u=c.tx,d=c.ty,f=c.a,p=c.c,m=c.b,$=c.d,g=e,v=a;v<r;g+=2,v+=i){var x=h[g],y=h[g+1];n[v]=x*f+y*p+u,n[v+1]=x*m+y*$+d}return}for(var b=0,_=0,w=0;w<e;w+=2){var k=l[b];b+=k+1,_+=k}var S=s.bones;if(0==o.length)for(var v=a,p=3*_;v<r;v+=i){var M=0,T=0,k=l[b++];for(k+=b;b<k;b++,p+=3){var c=S[l[b]].matrix,x=h[p],y=h[p+1],B=h[p+2];M+=(x*c.a+y*c.c+c.tx)*B,T+=(x*c.b+y*c.d+c.ty)*B}n[v]=M,n[v+1]=T}else for(var C=o,v=a,p=3*_,I=_<<1;v<r;v+=i){var M=0,T=0,k=l[b++];for(k+=b;b<k;b++,p+=3,I+=2){var c=S[l[b]].matrix,x=h[p]+C[I],y=h[p+1]+C[I+1],B=h[p+2];M+=(x*c.a+y*c.c+c.tx)*B,T+=(x*c.b+y*c.d+c.ty)*B}n[v]=M,n[v+1]=T}},e.prototype.copyTo=function(t){this.bones?(t.bones=Array(this.bones.length),L.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices?(t.vertices=L.newFloatArray(this.vertices.length),L.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment},e.nextID=0,e}(tn),ti=function(e){function r(r){var n=e.call(this,r)||this;return n.type=t.AttachmentType.BoundingBox,n.color=new F(1,1,1,1),n}return te(r,e),r.prototype.copy=function(){var t=new r(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},r}(ta),ts=function(e){function r(r){var n=e.call(this,r)||this;return n.type=t.AttachmentType.Clipping,n.color=new F(.2275,.2275,.8078,1),n}return te(r,e),r.prototype.copy=function(){var t=new r(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},r}(ta),to=function(e){function r(r){var n=e.call(this,r)||this;return n.type=t.AttachmentType.Mesh,n.color=new F(1,1,1,1),n.tempColor=new F(0,0,0,0),n}return te(r,e),r.prototype.getParentMesh=function(){return this.parentMesh},r.prototype.setParentMesh=function(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},r.prototype.copy=function(){if(this.parentMesh)return this.newLinkedMesh();var t=new r(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),L.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=Array(this.triangles.length),L.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges&&(t.edges=Array(this.edges.length),L.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t},r.prototype.newLinkedMesh=function(){var t=new r(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t},r}(ta),th=function(e){function r(r){var n=e.call(this,r)||this;return n.type=t.AttachmentType.Path,n.closed=!1,n.constantSpeed=!1,n.color=new F(1,1,1,1),n}return te(r,e),r.prototype.copy=function(){var t=new r(this.name);return this.copyTo(t),t.lengths=Array(this.lengths.length),L.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t},r}(ta),tl=function(e){function r(r){var n=e.call(this,r)||this;return n.type=t.AttachmentType.Point,n.color=new F(.38,.94,0,1),n}return te(r,e),r.prototype.computeWorldPosition=function(t,e){var r=t.matrix;return e.x=this.x*r.a+this.y*r.c+t.worldX,e.y=this.x*r.b+this.y*r.d+t.worldY,e},r.prototype.computeWorldRotation=function(t){var e=t.matrix,r=X.cosDeg(this.rotation),n=X.sinDeg(this.rotation),a=r*e.a+n*e.c;return Math.atan2(r*e.b+n*e.d,a)*X.radDeg},r.prototype.copy=function(){var t=new r(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},r}(ta),tc=function(){function t(t,e){if(this.deform=[],null==t)throw Error("data cannot be null.");if(null==e)throw Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new F,this.darkColor=null==t.darkColor?null:new F,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getSkeleton=function(){return this.bone.skeleton},t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},t.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}(),tu=function(e){function r(r){var n=e.call(this,r)||this;return n.type=t.AttachmentType.Region,n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new F(1,1,1,1),n.offset=L.newFloatArray(8),n.uvs=L.newFloatArray(8),n.tempColor=new F(1,1,1,1),n}return te(r,e),r.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,a=-this.height/2*this.scaleY+this.region.offsetY*e,i=n+this.region.width*t,s=a+this.region.height*e,o=this.rotation*Math.PI/180,h=Math.cos(o),l=Math.sin(o),c=n*h+this.x,u=n*l,d=a*h+this.y,f=a*l,p=i*h+this.x,m=i*l,$=s*h+this.y,g=s*l,v=this.offset;v[r.OX1]=c-f,v[r.OY1]=d+u,v[r.OX2]=c-g,v[r.OY2]=$+u,v[r.OX3]=p-g,v[r.OY3]=$+m,v[r.OX4]=p-f,v[r.OY4]=d+m},r.prototype.setRegion=function(t){this.region=t;var e=this.uvs;90==t.degrees?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},r.prototype.computeWorldVertices=function(t,e,n,a){var i=this.offset,s=t instanceof tc?t.bone.matrix:t.matrix,o=s.tx,h=s.ty,l=s.a,c=s.c,u=s.b,d=s.d,f=0,p=0;f=i[r.OX1],p=i[r.OY1],e[n]=f*l+p*c+o,e[n+1]=f*u+p*d+h,n+=a,f=i[r.OX2],p=i[r.OY2],e[n]=f*l+p*c+o,e[n+1]=f*u+p*d+h,n+=a,f=i[r.OX3],p=i[r.OY3],e[n]=f*l+p*c+o,e[n+1]=f*u+p*d+h,n+=a,f=i[r.OX4],p=i[r.OY4],e[n]=f*l+p*c+o,e[n+1]=f*u+p*d+h},r.prototype.copy=function(){var t=new r(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,L.arrayCopy(this.uvs,0,t.uvs,0,8),L.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},r.OX1=0,r.OY1=1,r.OX2=2,r.OY2=3,r.OX3=4,r.OY3=5,r.OX4=6,r.OY4=7,r.X1=0,r.Y1=1,r.C1R=2,r.C1G=3,r.C1B=4,r.C1A=5,r.U1=6,r.V1=7,r.X2=8,r.Y2=9,r.C2R=10,r.C2G=11,r.C2B=12,r.C2A=13,r.U2=14,r.V2=15,r.X3=16,r.Y3=17,r.C3R=18,r.C3G=19,r.C3B=20,r.C3A=21,r.U3=22,r.V3=23,r.X4=24,r.Y4=25,r.C4R=26,r.C4G=27,r.C4B=28,r.C4A=29,r.U4=30,r.V4=31,r}(tn),td=function(){function t(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return t.prototype.begin=function(t){},t.prototype.transform=function(t,e,r,n){t.x+=X.randomTriangular(-this.jitterX,this.jitterY),t.y+=X.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}(),tf=function(){function t(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return t.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},t.prototype.transform=function(e,r,n,a){var i=this.angle*X.degreesToRadians,s=e.x-this.worldX,o=e.y-this.worldY,h=Math.sqrt(s*s+o*o);if(h<this.radius){var l=t.interpolation.apply(0,i,(this.radius-h)/this.radius),c=Math.cos(l),u=Math.sin(l);e.x=c*s-u*o+this.worldX,e.y=u*s+c*o+this.worldY}},t.prototype.end=function(){},t.interpolation=new D(2),t}(),tp=function(){function t(t,e,r){if(this.timelines=null,this.timelineIds=null,!t)throw Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=r}return t.prototype.setTimelines=function(t){if(!t)throw Error("timelines cannot be null.");this.timelines=t,this.timelineIds=new Y;for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())},t.prototype.hasTimeline=function(t){for(var e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1},t.prototype.apply=function(t,e,r,n,a,i,s,o){if(!t)throw Error("skeleton cannot be null.");n&&0!=this.duration&&(r%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,l=0,c=h.length;l<c;l++)h[l].apply(t,e,r,a,i,s,o)},t}(),tm={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18},t$=function(){function t(t,e){this.propertyIds=null,this.frames=null,this.propertyIds=e,this.frames=L.newFloatArray(t*this.getFrameEntries())}return t.prototype.getPropertyIds=function(){return this.propertyIds},t.prototype.getFrameEntries=function(){return 1},t.prototype.getFrameCount=function(){return this.frames.length/this.getFrameEntries()},t.prototype.getDuration=function(){return this.frames[this.frames.length-this.getFrameEntries()]},t.search1=function(t,e){for(var r=t.length,n=1;n<r;n++)if(t[n]>e)return n-1;return r-1},t.search=function(t,e,r){for(var n=t.length,a=r;a<n;a+=r)if(t[a]>e)return a-r;return n-r},t}(),tg=function(t){function e(e,r,n){var a=t.call(this,e,n)||this;return a.curves=null,a.curves=L.newFloatArray(e+18*r),a.curves[e-1]=1,a}return te(e,t),e.prototype.setLinear=function(t){this.curves[t]=0},e.prototype.setStepped=function(t){this.curves[t]=1},e.prototype.shrink=function(t){var e=this.getFrameCount()+18*t;if(this.curves.length>e){var r=L.newFloatArray(e);L.arrayCopy(this.curves,0,r,0,e),this.curves=r}},e.prototype.setBezier=function(t,e,r,n,a,i,s,o,h,l,c){var u=this.curves,d=this.getFrameCount()+18*t;0==r&&(u[e]=2+d);for(var f=(n-2*i+o)*.03,p=(a-2*s+h)*.03,m=((i-o)*3-n+l)*.006,$=((s-h)*3-a+c)*.006,g=2*f+m,v=2*p+$,x=(i-n)*.3+f+.16666667*m,y=(s-a)*.3+p+.16666667*$,b=n+x,_=a+y,w=d+18;d<w;d+=2)u[d]=b,u[d+1]=_,x+=g,y+=v,g+=m,v+=$,b+=x,_+=y},e.prototype.getBezierValue=function(t,e,r,n){var a=this.curves;if(a[n]>t){var i=this.frames[e],s=this.frames[e+r];return s+(t-i)/(a[n]-i)*(a[n+1]-s)}var o=n+18;for(n+=2;n<o;n+=2)if(a[n]>=t){var h=a[n-2],l=a[n-1];return l+(t-h)/(a[n]-h)*(a[n+1]-l)}e+=this.getFrameEntries();var c=a[o-2],u=a[o-1];return u+(t-c)/(this.frames[e]-c)*(this.frames[e+r]-u)},e}(t$),tv=function(t){function e(e,r,n){return t.call(this,e,r,[n])||this}return te(e,t),e.prototype.getFrameEntries=function(){return 2},e.prototype.setFrame=function(t,e,r){t<<=1,this.frames[t]=e,this.frames[t+1]=r},e.prototype.getCurveValue=function(t){for(var e=this.frames,r=e.length-2,n=2;n<=r;n+=2)if(e[n]>t){r=n-2;break}var a=this.curves[r>>1];switch(a){case 0:var i=e[r],s=e[r+1];return s+(t-i)/(e[r+2]-i)*(e[r+2+1]-s);case 1:return e[r+1]}return this.getBezierValue(t,r,1,a-2)},e}(tg),tx=function(t){function e(e,r,n,a){return t.call(this,e,r,[n,a])||this}return te(e,t),e.prototype.getFrameEntries=function(){return 3},e.prototype.setFrame=function(t,e,r,n){t*=3,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n},e}(tg),ty=function(e){function r(t,r,n){var a=e.call(this,t,r,tm.rotate+"|"+n)||this;return a.boneIndex=0,a.boneIndex=n,a}return te(r,e),r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.bones[this.boneIndex];if(h.active){if(n<this.frames[0]){switch(s){case t.MixBlend.setup:h.rotation=h.data.rotation;break;case t.MixBlend.first:h.rotation+=(h.data.rotation-h.rotation)*i}return}var l=this.getCurveValue(n);switch(s){case t.MixBlend.setup:h.rotation=h.data.rotation+l*i;break;case t.MixBlend.first:case t.MixBlend.replace:l+=h.data.rotation-h.rotation;case t.MixBlend.add:h.rotation+=l*i}}},r}(tv),tb=function(e){function r(t,r,n){var a=e.call(this,t,r,tm.x+"|"+n,tm.y+"|"+n)||this;return a.boneIndex=0,a.boneIndex=n,a}return te(r,e),r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.bones[this.boneIndex];if(h.active){var l=this.frames;if(n<l[0]){switch(s){case t.MixBlend.setup:h.x=h.data.x,h.y=h.data.y;break;case t.MixBlend.first:h.x+=(h.data.x-h.x)*i,h.y+=(h.data.y-h.y)*i}return}var c=0,u=0,d=t$.search(l,n,3),f=this.curves[d/3];switch(f){case 0:var p=l[d];c=l[d+1],u=l[d+2];var m=(n-p)/(l[d+3]-p);c+=(l[d+3+1]-c)*m,u+=(l[d+3+2]-u)*m;break;case 1:c=l[d+1],u=l[d+2];break;default:c=this.getBezierValue(n,d,1,f-2),u=this.getBezierValue(n,d,2,f+18-2)}switch(s){case t.MixBlend.setup:h.x=h.data.x+c*i,h.y=h.data.y+u*i;break;case t.MixBlend.first:case t.MixBlend.replace:h.x+=(h.data.x+c-h.x)*i,h.y+=(h.data.y+u-h.y)*i;break;case t.MixBlend.add:h.x+=c*i,h.y+=u*i}}},r}(tx),t_=function(e){function r(t,r,n){var a=e.call(this,t,r,tm.x+"|"+n)||this;return a.boneIndex=0,a.boneIndex=n,a}return te(r,e),r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.bones[this.boneIndex];if(h.active){if(n<this.frames[0]){switch(s){case t.MixBlend.setup:h.x=h.data.x;break;case t.MixBlend.first:h.x+=(h.data.x-h.x)*i}return}var l=this.getCurveValue(n);switch(s){case t.MixBlend.setup:h.x=h.data.x+l*i;break;case t.MixBlend.first:case t.MixBlend.replace:h.x+=(h.data.x+l-h.x)*i;break;case t.MixBlend.add:h.x+=l*i}}},r}(tv),tw=function(e){function r(t,r,n){var a=e.call(this,t,r,tm.y+"|"+n)||this;return a.boneIndex=0,a.boneIndex=n,a}return te(r,e),r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.bones[this.boneIndex];if(h.active){if(n<this.frames[0]){switch(s){case t.MixBlend.setup:h.y=h.data.y;break;case t.MixBlend.first:h.y+=(h.data.y-h.y)*i}return}var l=this.getCurveValue(n);switch(s){case t.MixBlend.setup:h.y=h.data.y+l*i;break;case t.MixBlend.first:case t.MixBlend.replace:h.y+=(h.data.y+l-h.y)*i;break;case t.MixBlend.add:h.y+=l*i}}},r}(tv),tk=function(e){function r(t,r,n){var a=e.call(this,t,r,tm.scaleX+"|"+n,tm.scaleY+"|"+n)||this;return a.boneIndex=0,a.boneIndex=n,a}return te(r,e),r.prototype.apply=function(e,r,n,a,i,s,o){var h,l,c=e.bones[this.boneIndex];if(c.active){var u=this.frames;if(n<u[0]){switch(s){case t.MixBlend.setup:c.scaleX=c.data.scaleX,c.scaleY=c.data.scaleY;break;case t.MixBlend.first:c.scaleX+=(c.data.scaleX-c.scaleX)*i,c.scaleY+=(c.data.scaleY-c.scaleY)*i}return}var d=t$.search(u,n,3),f=this.curves[d/3];switch(f){case 0:var p=u[d];h=u[d+1],l=u[d+2];var m=(n-p)/(u[d+3]-p);h+=(u[d+3+1]-h)*m,l+=(u[d+3+2]-l)*m;break;case 1:h=u[d+1],l=u[d+2];break;default:h=this.getBezierValue(n,d,1,f-2),l=this.getBezierValue(n,d,2,f+18-2)}if(h*=c.data.scaleX,l*=c.data.scaleY,1==i)s==t.MixBlend.add?(c.scaleX+=h-c.data.scaleX,c.scaleY+=l-c.data.scaleY):(c.scaleX=h,c.scaleY=l);else{var $=0,g=0;if(o==t.MixDirection.mixOut)switch(s){case t.MixBlend.setup:$=c.data.scaleX,g=c.data.scaleY,c.scaleX=$+(Math.abs(h)*X.signum($)-$)*i,c.scaleY=g+(Math.abs(l)*X.signum(g)-g)*i;break;case t.MixBlend.first:case t.MixBlend.replace:$=c.scaleX,g=c.scaleY,c.scaleX=$+(Math.abs(h)*X.signum($)-$)*i,c.scaleY=g+(Math.abs(l)*X.signum(g)-g)*i;break;case t.MixBlend.add:c.scaleX+=(h-c.data.scaleX)*i,c.scaleY+=(l-c.data.scaleY)*i}else switch(s){case t.MixBlend.setup:$=Math.abs(c.data.scaleX)*X.signum(h),g=Math.abs(c.data.scaleY)*X.signum(l),c.scaleX=$+(h-$)*i,c.scaleY=g+(l-g)*i;break;case t.MixBlend.first:case t.MixBlend.replace:$=Math.abs(c.scaleX)*X.signum(h),g=Math.abs(c.scaleY)*X.signum(l),c.scaleX=$+(h-$)*i,c.scaleY=g+(l-g)*i;break;case t.MixBlend.add:c.scaleX+=(h-c.data.scaleX)*i,c.scaleY+=(l-c.data.scaleY)*i}}}},r}(tx),tS=function(e){function r(t,r,n){var a=e.call(this,t,r,tm.scaleX+"|"+n)||this;return a.boneIndex=0,a.boneIndex=n,a}return te(r,e),r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.bones[this.boneIndex];if(h.active){if(n<this.frames[0]){switch(s){case t.MixBlend.setup:h.scaleX=h.data.scaleX;break;case t.MixBlend.first:h.scaleX+=(h.data.scaleX-h.scaleX)*i}return}var l=this.getCurveValue(n)*h.data.scaleX;if(1==i)s==t.MixBlend.add?h.scaleX+=l-h.data.scaleX:h.scaleX=l;else{var c=0;if(o==t.MixDirection.mixOut)switch(s){case t.MixBlend.setup:c=h.data.scaleX,h.scaleX=c+(Math.abs(l)*X.signum(c)-c)*i;break;case t.MixBlend.first:case t.MixBlend.replace:c=h.scaleX,h.scaleX=c+(Math.abs(l)*X.signum(c)-c)*i;break;case t.MixBlend.add:h.scaleX+=(l-h.data.scaleX)*i}else switch(s){case t.MixBlend.setup:c=Math.abs(h.data.scaleX)*X.signum(l),h.scaleX=c+(l-c)*i;break;case t.MixBlend.first:case t.MixBlend.replace:c=Math.abs(h.scaleX)*X.signum(l),h.scaleX=c+(l-c)*i;break;case t.MixBlend.add:h.scaleX+=(l-h.data.scaleX)*i}}}},r}(tv),t0=function(e){function r(t,r,n){var a=e.call(this,t,r,tm.scaleY+"|"+n)||this;return a.boneIndex=0,a.boneIndex=n,a}return te(r,e),r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.bones[this.boneIndex];if(h.active){if(n<this.frames[0]){switch(s){case t.MixBlend.setup:h.scaleY=h.data.scaleY;break;case t.MixBlend.first:h.scaleY+=(h.data.scaleY-h.scaleY)*i}return}var l=this.getCurveValue(n)*h.data.scaleY;if(1==i)s==t.MixBlend.add?h.scaleY+=l-h.data.scaleY:h.scaleY=l;else{var c=0;if(o==t.MixDirection.mixOut)switch(s){case t.MixBlend.setup:c=h.data.scaleY,h.scaleY=c+(Math.abs(l)*X.signum(c)-c)*i;break;case t.MixBlend.first:case t.MixBlend.replace:c=h.scaleY,h.scaleY=c+(Math.abs(l)*X.signum(c)-c)*i;break;case t.MixBlend.add:h.scaleY+=(l-h.data.scaleY)*i}else switch(s){case t.MixBlend.setup:c=Math.abs(h.data.scaleY)*X.signum(l),h.scaleY=c+(l-c)*i;break;case t.MixBlend.first:case t.MixBlend.replace:c=Math.abs(h.scaleY)*X.signum(l),h.scaleY=c+(l-c)*i;break;case t.MixBlend.add:h.scaleY+=(l-h.data.scaleY)*i}}}},r}(tv),tM=function(e){function r(t,r,n){var a=e.call(this,t,r,tm.shearX+"|"+n,tm.shearY+"|"+n)||this;return a.boneIndex=0,a.boneIndex=n,a}return te(r,e),r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.bones[this.boneIndex];if(h.active){var l=this.frames;if(n<l[0]){switch(s){case t.MixBlend.setup:h.shearX=h.data.shearX,h.shearY=h.data.shearY;break;case t.MixBlend.first:h.shearX+=(h.data.shearX-h.shearX)*i,h.shearY+=(h.data.shearY-h.shearY)*i}return}var c=0,u=0,d=t$.search(l,n,3),f=this.curves[d/3];switch(f){case 0:var p=l[d];c=l[d+1],u=l[d+2];var m=(n-p)/(l[d+3]-p);c+=(l[d+3+1]-c)*m,u+=(l[d+3+2]-u)*m;break;case 1:c=l[d+1],u=l[d+2];break;default:c=this.getBezierValue(n,d,1,f-2),u=this.getBezierValue(n,d,2,f+18-2)}switch(s){case t.MixBlend.setup:h.shearX=h.data.shearX+c*i,h.shearY=h.data.shearY+u*i;break;case t.MixBlend.first:case t.MixBlend.replace:h.shearX+=(h.data.shearX+c-h.shearX)*i,h.shearY+=(h.data.shearY+u-h.shearY)*i;break;case t.MixBlend.add:h.shearX+=c*i,h.shearY+=u*i}}},r}(tx),tT=function(e){function r(t,r,n){var a=e.call(this,t,r,tm.shearX+"|"+n)||this;return a.boneIndex=0,a.boneIndex=n,a}return te(r,e),r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.bones[this.boneIndex];if(h.active){if(n<this.frames[0]){switch(s){case t.MixBlend.setup:h.shearX=h.data.shearX;break;case t.MixBlend.first:h.shearX+=(h.data.shearX-h.shearX)*i}return}var l=this.getCurveValue(n);switch(s){case t.MixBlend.setup:h.shearX=h.data.shearX+l*i;break;case t.MixBlend.first:case t.MixBlend.replace:h.shearX+=(h.data.shearX+l-h.shearX)*i;break;case t.MixBlend.add:h.shearX+=l*i}}},r}(tv),tB=function(e){function r(t,r,n){var a=e.call(this,t,r,tm.shearY+"|"+n)||this;return a.boneIndex=0,a.boneIndex=n,a}return te(r,e),r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.bones[this.boneIndex];if(h.active){if(n<this.frames[0]){switch(s){case t.MixBlend.setup:h.shearY=h.data.shearY;break;case t.MixBlend.first:h.shearY+=(h.data.shearY-h.shearY)*i}return}var l=this.getCurveValue(n);switch(s){case t.MixBlend.setup:h.shearY=h.data.shearY+l*i;break;case t.MixBlend.first:case t.MixBlend.replace:h.shearY+=(h.data.shearY+l-h.shearY)*i;break;case t.MixBlend.add:h.shearY+=l*i}}},r}(tv),tC=function(e){function r(t,r,n){var a=e.call(this,t,r,[tm.rgb+"|"+n,tm.alpha+"|"+n])||this;return a.slotIndex=0,a.slotIndex=n,a}return te(r,e),r.prototype.getFrameEntries=function(){return 5},r.prototype.setFrame=function(t,e,r,n,a,i){t*=5,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=a,this.frames[t+4]=i},r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.slots[this.slotIndex];if(h.bone.active){var l=this.frames,c=h.color;if(n<l[0]){var u=h.data.color;switch(s){case t.MixBlend.setup:c.setFromColor(u);break;case t.MixBlend.first:c.add((u.r-c.r)*i,(u.g-c.g)*i,(u.b-c.b)*i,(u.a-c.a)*i)}return}var d=0,f=0,p=0,m=0,$=t$.search(l,n,5),g=this.curves[$/5];switch(g){case 0:var v=l[$];d=l[$+1],f=l[$+2],p=l[$+3],m=l[$+4];var x=(n-v)/(l[$+5]-v);d+=(l[$+5+1]-d)*x,f+=(l[$+5+2]-f)*x,p+=(l[$+5+3]-p)*x,m+=(l[$+5+4]-m)*x;break;case 1:d=l[$+1],f=l[$+2],p=l[$+3],m=l[$+4];break;default:d=this.getBezierValue(n,$,1,g-2),f=this.getBezierValue(n,$,2,g+18-2),p=this.getBezierValue(n,$,3,g+36-2),m=this.getBezierValue(n,$,4,g+54-2)}1==i?c.set(d,f,p,m):(s==t.MixBlend.setup&&c.setFromColor(h.data.color),c.add((d-c.r)*i,(f-c.g)*i,(p-c.b)*i,(m-c.a)*i))}},r}(tg),tI=function(e){function r(t,r,n){var a=e.call(this,t,r,[tm.rgb+"|"+n])||this;return a.slotIndex=0,a.slotIndex=n,a}return te(r,e),r.prototype.getFrameEntries=function(){return 4},r.prototype.setFrame=function(t,e,r,n,a){t<<=2,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=a},r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.slots[this.slotIndex];if(h.bone.active){var l=this.frames,c=h.color;if(n<l[0]){var u=h.data.color;switch(s){case t.MixBlend.setup:c.r=u.r,c.g=u.g,c.b=u.b;break;case t.MixBlend.first:c.r+=(u.r-c.r)*i,c.g+=(u.g-c.g)*i,c.b+=(u.b-c.b)*i}return}var d=0,f=0,p=0,m=t$.search(l,n,4),$=this.curves[m>>2];switch($){case 0:var g=l[m];d=l[m+1],f=l[m+2],p=l[m+3];var v=(n-g)/(l[m+4]-g);d+=(l[m+4+1]-d)*v,f+=(l[m+4+2]-f)*v,p+=(l[m+4+3]-p)*v;break;case 1:d=l[m+1],f=l[m+2],p=l[m+3];break;default:d=this.getBezierValue(n,m,1,$-2),f=this.getBezierValue(n,m,2,$+18-2),p=this.getBezierValue(n,m,3,$+36-2)}if(1==i)c.r=d,c.g=f,c.b=p;else{if(s==t.MixBlend.setup){var u=h.data.color;c.r=u.r,c.g=u.g,c.b=u.b}c.r+=(d-c.r)*i,c.g+=(f-c.g)*i,c.b+=(p-c.b)*i}}},r}(tg),tA=function(e){function r(t,r,n){var a=e.call(this,t,r,tm.alpha+"|"+n)||this;return a.slotIndex=0,a.slotIndex=n,a}return te(r,e),r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.slots[this.slotIndex];if(h.bone.active){var l=h.color;if(n<this.frames[0]){var c=h.data.color;switch(s){case t.MixBlend.setup:l.a=c.a;break;case t.MixBlend.first:l.a+=(c.a-l.a)*i}return}var u=this.getCurveValue(n);1==i?l.a=u:(s==t.MixBlend.setup&&(l.a=h.data.color.a),l.a+=(u-l.a)*i)}},r}(tv),tY=function(e){function r(t,r,n){var a=e.call(this,t,r,[tm.rgb+"|"+n,tm.alpha+"|"+n,tm.rgb2+"|"+n])||this;return a.slotIndex=0,a.slotIndex=n,a}return te(r,e),r.prototype.getFrameEntries=function(){return 8},r.prototype.setFrame=function(t,e,r,n,a,i,s,o,h){t<<=3,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=a,this.frames[t+4]=i,this.frames[t+5]=s,this.frames[t+6]=o,this.frames[t+7]=h},r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.slots[this.slotIndex];if(h.bone.active){var l=this.frames,c=h.color,u=h.darkColor;if(n<l[0]){var d=h.data.color,f=h.data.darkColor;switch(s){case t.MixBlend.setup:c.setFromColor(d),u.r=f.r,u.g=f.g,u.b=f.b;break;case t.MixBlend.first:c.add((d.r-c.r)*i,(d.g-c.g)*i,(d.b-c.b)*i,(d.a-c.a)*i),u.r+=(f.r-u.r)*i,u.g+=(f.g-u.g)*i,u.b+=(f.b-u.b)*i}return}var p=0,m=0,$=0,g=0,v=0,x=0,y=0,b=t$.search(l,n,8),_=this.curves[b>>3];switch(_){case 0:var w=l[b];p=l[b+1],m=l[b+2],$=l[b+3],g=l[b+4],v=l[b+5],x=l[b+6],y=l[b+7];var k=(n-w)/(l[b+8]-w);p+=(l[b+8+1]-p)*k,m+=(l[b+8+2]-m)*k,$+=(l[b+8+3]-$)*k,g+=(l[b+8+4]-g)*k,v+=(l[b+8+5]-v)*k,x+=(l[b+8+6]-x)*k,y+=(l[b+8+7]-y)*k;break;case 1:p=l[b+1],m=l[b+2],$=l[b+3],g=l[b+4],v=l[b+5],x=l[b+6],y=l[b+7];break;default:p=this.getBezierValue(n,b,1,_-2),m=this.getBezierValue(n,b,2,_+18-2),$=this.getBezierValue(n,b,3,_+36-2),g=this.getBezierValue(n,b,4,_+54-2),v=this.getBezierValue(n,b,5,_+72-2),x=this.getBezierValue(n,b,6,_+90-2),y=this.getBezierValue(n,b,7,_+108-2)}if(1==i)c.set(p,m,$,g),u.r=v,u.g=x,u.b=y;else{if(s==t.MixBlend.setup){c.setFromColor(h.data.color);var f=h.data.darkColor;u.r=f.r,u.g=f.g,u.b=f.b}c.add((p-c.r)*i,(m-c.g)*i,($-c.b)*i,(g-c.a)*i),u.r+=(v-u.r)*i,u.g+=(x-u.g)*i,u.b+=(y-u.b)*i}}},r}(tg),tF=function(e){function r(t,r,n){var a=e.call(this,t,r,[tm.rgb+"|"+n,tm.rgb2+"|"+n])||this;return a.slotIndex=0,a.slotIndex=n,a}return te(r,e),r.prototype.getFrameEntries=function(){return 7},r.prototype.setFrame=function(t,e,r,n,a,i,s,o){t*=7,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=a,this.frames[t+4]=i,this.frames[t+5]=s,this.frames[t+6]=o},r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.slots[this.slotIndex];if(h.bone.active){var l=this.frames,c=h.color,u=h.darkColor;if(n<l[0]){var d=h.data.color,f=h.data.darkColor;switch(s){case t.MixBlend.setup:c.r=d.r,c.g=d.g,c.b=d.b,u.r=f.r,u.g=f.g,u.b=f.b;break;case t.MixBlend.first:c.r+=(d.r-c.r)*i,c.g+=(d.g-c.g)*i,c.b+=(d.b-c.b)*i,u.r+=(f.r-u.r)*i,u.g+=(f.g-u.g)*i,u.b+=(f.b-u.b)*i}return}var p=0,m=0,$=0,g=0,v=0,x=0,y=t$.search(l,n,7),b=this.curves[y/7];switch(b){case 0:var _=l[y];p=l[y+1],m=l[y+2],$=l[y+3],g=l[y+4],v=l[y+5],x=l[y+6];var w=(n-_)/(l[y+7]-_);p+=(l[y+7+1]-p)*w,m+=(l[y+7+2]-m)*w,$+=(l[y+7+3]-$)*w,g+=(l[y+7+4]-g)*w,v+=(l[y+7+5]-v)*w,x+=(l[y+7+6]-x)*w;break;case 1:p=l[y+1],m=l[y+2],$=l[y+3],g=l[y+4],v=l[y+5],x=l[y+6];break;default:p=this.getBezierValue(n,y,1,b-2),m=this.getBezierValue(n,y,2,b+18-2),$=this.getBezierValue(n,y,3,b+36-2),g=this.getBezierValue(n,y,4,b+54-2),v=this.getBezierValue(n,y,5,b+72-2),x=this.getBezierValue(n,y,6,b+90-2)}if(1==i)c.r=p,c.g=m,c.b=$,u.r=g,u.g=v,u.b=x;else{if(s==t.MixBlend.setup){var d=h.data.color,f=h.data.darkColor;c.r=d.r,c.g=d.g,c.b=d.b,u.r=f.r,u.g=f.g,u.b=f.b}c.r+=(p-c.r)*i,c.g+=(m-c.g)*i,c.b+=($-c.b)*i,u.r+=(g-u.r)*i,u.g+=(v-u.g)*i,u.b+=(x-u.b)*i}}},r}(tg),tX=function(e){function r(t,r){var n=e.call(this,t,[tm.attachment+"|"+r])||this;return n.slotIndex=0,n.slotIndex=r,n.attachmentNames=Array(t),n}return te(r,e),r.prototype.getFrameCount=function(){return this.frames.length},r.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r},r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.slots[this.slotIndex];if(h.bone.active){if(o==t.MixDirection.mixOut){s==t.MixBlend.setup&&this.setAttachment(e,h,h.data.attachmentName);return}if(n<this.frames[0]){(s==t.MixBlend.setup||s==t.MixBlend.first)&&this.setAttachment(e,h,h.data.attachmentName);return}this.setAttachment(e,h,this.attachmentNames[t$.search1(this.frames,n)])}},r.prototype.setAttachment=function(t,e,r){e.setAttachment(r?t.getAttachment(this.slotIndex,r):null)},r}(t$),tP=function(e){function r(t,r,n,a){var i=e.call(this,t,r,[tm.deform+"|"+n+"|"+a.id])||this;return i.slotIndex=0,i.attachment=null,i.vertices=null,i.slotIndex=n,i.attachment=a,i.vertices=Array(t),i}return te(r,e),r.prototype.getFrameCount=function(){return this.frames.length},r.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.vertices[t]=r},r.prototype.setBezier=function(t,e,r,n,a,i,s,o,h,l,c){var u=this.curves,d=this.getFrameCount()+18*t;0==r&&(u[e]=2+d);for(var f=(n-2*i+o)*.03,p=.03*h-.06*s,m=((i-o)*3-n+l)*.006,$=(s-h+.33333333)*.018,g=2*f+m,v=2*p+$,x=(i-n)*.3+f+.16666667*m,y=.3*s+p+.16666667*$,b=n+x,_=y,w=d+18;d<w;d+=2)u[d]=b,u[d+1]=_,x+=g,y+=v,g+=m,v+=$,b+=x,_+=y},r.prototype.getCurvePercent=function(t,e){var r=this.curves,n=r[e];switch(n){case 0:var a=this.frames[e];return(t-a)/(this.frames[e+this.getFrameEntries()]-a);case 1:return 0}if(r[n-=2]>t){var i=this.frames[e];return r[n+1]*(t-i)/(r[n]-i)}var s=n+18;for(n+=2;n<s;n+=2)if(r[n]>=t){var o=r[n-2],h=r[n-1];return h+(t-o)/(r[n]-o)*(r[n+1]-h)}var l=r[s-2],c=r[s-1];return c+(1-c)*(t-l)/(this.frames[e+this.getFrameEntries()]-l)},r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.slots[this.slotIndex];if(h.bone.active){var l=h.getAttachment();if(l instanceof ta&&l.deformAttachment==this.attachment){var c=h.deform;0==c.length&&(s=t.MixBlend.setup);var u=this.vertices,d=u[0].length,f=this.frames;if(n<f[0]){var p=l;switch(s){case t.MixBlend.setup:c.length=0;break;case t.MixBlend.first:if(1==i){c.length=0;break}if(c.length=d,p.bones){i=1-i;for(var m=0;m<d;m++)c[m]*=i}else for(var $=p.vertices,m=0;m<d;m++)c[m]+=($[m]-c[m])*i}return}if(c.length=d,n>=f[f.length-1]){var g=u[f.length-1];if(1==i){if(s==t.MixBlend.add){var p=l;if(p.bones)for(var v=0;v<d;v++)c[v]+=g[v];else for(var $=p.vertices,x=0;x<d;x++)c[x]+=g[x]-$[x]}else L.arrayCopy(g,0,c,0,d)}else switch(s){case t.MixBlend.setup:var y=l;if(y.bones)for(var b=0;b<d;b++)c[b]=g[b]*i;else for(var $=y.vertices,_=0;_<d;_++){var w=$[_];c[_]=w+(g[_]-w)*i}break;case t.MixBlend.first:case t.MixBlend.replace:for(var k=0;k<d;k++)c[k]+=(g[k]-c[k])*i;break;case t.MixBlend.add:var p=l;if(p.bones)for(var S=0;S<d;S++)c[S]+=g[S]*i;else for(var $=p.vertices,M=0;M<d;M++)c[M]+=(g[M]-$[M])*i}return}var T=t$.search1(f,n),B=this.getCurvePercent(n,T),C=u[T],I=u[T+1];if(1==i){if(s==t.MixBlend.add){var p=l;if(p.bones)for(var A=0;A<d;A++){var Y=C[A];c[A]+=Y+(I[A]-Y)*B}else for(var $=p.vertices,F=0;F<d;F++){var Y=C[F];c[F]+=Y+(I[F]-Y)*B-$[F]}}else for(var X=0;X<d;X++){var Y=C[X];c[X]=Y+(I[X]-Y)*B}}else switch(s){case t.MixBlend.setup:var P=l;if(P.bones)for(var R=0;R<d;R++){var Y=C[R];c[R]=(Y+(I[R]-Y)*B)*i}else for(var $=P.vertices,D=0;D<d;D++){var Y=C[D],w=$[D];c[D]=w+(Y+(I[D]-Y)*B-w)*i}break;case t.MixBlend.first:case t.MixBlend.replace:for(var E=0;E<d;E++){var Y=C[E];c[E]+=(Y+(I[E]-Y)*B-c[E])*i}break;case t.MixBlend.add:var p=l;if(p.bones)for(var V=0;V<d;V++){var Y=C[V];c[V]+=(Y+(I[V]-Y)*B)*i}else for(var $=p.vertices,N=0;N<d;N++){var Y=C[N];c[N]+=(Y+(I[N]-Y)*B-$[N])*i}}}}},r}(tg),tR=function(t){function e(r){var n=t.call(this,r,e.propertyIds)||this;return n.events=null,n.events=Array(r),n}return te(e,t),e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},e.prototype.apply=function(t,e,r,n,a,i,s){if(n){var o=this.frames,h=this.frames.length;if(e>r)this.apply(t,e,Number.MAX_VALUE,n,a,i,s),e=-1;else if(e>=o[h-1])return;if(!(r<o[0])){var l=0;if(e<o[0])l=0;else for(var c=o[l=t$.search1(o,e)+1];l>0&&o[l-1]==c;)l--;for(;l<h&&r>=o[l];l++)n.push(this.events[l])}}},e.propertyIds=[""+tm.event],e}(t$),tD=function(e){function r(t){var n=e.call(this,t,r.propertyIds)||this;return n.drawOrders=null,n.drawOrders=Array(t),n}return te(r,e),r.prototype.getFrameCount=function(){return this.frames.length},r.prototype.setFrame=function(t,e,r){this.frames[t]=e,this.drawOrders[t]=r},r.prototype.apply=function(e,r,n,a,i,s,o){if(o==t.MixDirection.mixOut){s==t.MixBlend.setup&&L.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}if(n<this.frames[0]){(s==t.MixBlend.setup||s==t.MixBlend.first)&&L.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);return}var h=this.drawOrders[t$.search1(this.frames,n)];if(h)for(var l=e.drawOrder,c=e.slots,u=0,d=h.length;u<d;u++)l[u]=c[h[u]];else L.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length)},r.propertyIds=[""+tm.drawOrder],r}(t$),t1=function(e){function r(t,r,n){var a=e.call(this,t,r,[tm.ikConstraint+"|"+n])||this;return a.ikConstraintIndex=0,a.ikConstraintIndex=n,a}return te(r,e),r.prototype.getFrameEntries=function(){return 6},r.prototype.setFrame=function(t,e,r,n,a,i,s){t*=6,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=a,this.frames[t+4]=i?1:0,this.frames[t+5]=s?1:0},r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.ikConstraints[this.ikConstraintIndex];if(h.active){var l=this.frames;if(n<l[0]){switch(s){case t.MixBlend.setup:h.mix=h.data.mix,h.softness=h.data.softness,h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch;break;case t.MixBlend.first:h.mix+=(h.data.mix-h.mix)*i,h.softness+=(h.data.softness-h.softness)*i,h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch}return}var c=0,u=0,d=t$.search(l,n,6),f=this.curves[d/6];switch(f){case 0:var p=l[d];c=l[d+1],u=l[d+2];var m=(n-p)/(l[d+6]-p);c+=(l[d+6+1]-c)*m,u+=(l[d+6+2]-u)*m;break;case 1:c=l[d+1],u=l[d+2];break;default:c=this.getBezierValue(n,d,1,f-2),u=this.getBezierValue(n,d,2,f+18-2)}s==t.MixBlend.setup?(h.mix=h.data.mix+(c-h.data.mix)*i,h.softness=h.data.softness+(u-h.data.softness)*i,o==t.MixDirection.mixOut?(h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch):(h.bendDirection=l[d+3],h.compress=0!=l[d+4],h.stretch=0!=l[d+5])):(h.mix+=(c-h.mix)*i,h.softness+=(u-h.softness)*i,o==t.MixDirection.mixIn&&(h.bendDirection=l[d+3],h.compress=0!=l[d+4],h.stretch=0!=l[d+5]))}},r}(tg),tL=function(e){function r(t,r,n){var a=e.call(this,t,r,[tm.transformConstraint+"|"+n])||this;return a.transformConstraintIndex=0,a.transformConstraintIndex=n,a}return te(r,e),r.prototype.getFrameEntries=function(){return 7},r.prototype.setFrame=function(t,e,r,n,a,i,s,o){var h=this.frames;h[t*=7]=e,h[t+1]=r,h[t+2]=n,h[t+3]=a,h[t+4]=i,h[t+5]=s,h[t+6]=o},r.prototype.apply=function(e,r,n,a,i,s,o){var h,l,c,u,d,f,p=e.transformConstraints[this.transformConstraintIndex];if(p.active){var m=this.frames;if(n<m[0]){var $=p.data;switch(s){case t.MixBlend.setup:p.mixRotate=$.mixRotate,p.mixX=$.mixX,p.mixY=$.mixY,p.mixScaleX=$.mixScaleX,p.mixScaleY=$.mixScaleY,p.mixShearY=$.mixShearY;break;case t.MixBlend.first:p.mixRotate+=($.mixRotate-p.mixRotate)*i,p.mixX+=($.mixX-p.mixX)*i,p.mixY+=($.mixY-p.mixY)*i,p.mixScaleX+=($.mixScaleX-p.mixScaleX)*i,p.mixScaleY+=($.mixScaleY-p.mixScaleY)*i,p.mixShearY+=($.mixShearY-p.mixShearY)*i}return}var g=t$.search(m,n,7),v=this.curves[g/7];switch(v){case 0:var x=m[g];h=m[g+1],l=m[g+2],c=m[g+3],u=m[g+4],d=m[g+5],f=m[g+6];var y=(n-x)/(m[g+7]-x);h+=(m[g+7+1]-h)*y,l+=(m[g+7+2]-l)*y,c+=(m[g+7+3]-c)*y,u+=(m[g+7+4]-u)*y,d+=(m[g+7+5]-d)*y,f+=(m[g+7+6]-f)*y;break;case 1:h=m[g+1],l=m[g+2],c=m[g+3],u=m[g+4],d=m[g+5],f=m[g+6];break;default:h=this.getBezierValue(n,g,1,v-2),l=this.getBezierValue(n,g,2,v+18-2),c=this.getBezierValue(n,g,3,v+36-2),u=this.getBezierValue(n,g,4,v+54-2),d=this.getBezierValue(n,g,5,v+72-2),f=this.getBezierValue(n,g,6,v+90-2)}if(s==t.MixBlend.setup){var $=p.data;p.mixRotate=$.mixRotate+(h-$.mixRotate)*i,p.mixX=$.mixX+(l-$.mixX)*i,p.mixY=$.mixY+(c-$.mixY)*i,p.mixScaleX=$.mixScaleX+(u-$.mixScaleX)*i,p.mixScaleY=$.mixScaleY+(d-$.mixScaleY)*i,p.mixShearY=$.mixShearY+(f-$.mixShearY)*i}else p.mixRotate+=(h-p.mixRotate)*i,p.mixX+=(l-p.mixX)*i,p.mixY+=(c-p.mixY)*i,p.mixScaleX+=(u-p.mixScaleX)*i,p.mixScaleY+=(d-p.mixScaleY)*i,p.mixShearY+=(f-p.mixShearY)*i}},r}(tg),tE=function(e){function r(t,r,n){var a=e.call(this,t,r,tm.pathConstraintPosition+"|"+n)||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=n,a}return te(r,e),r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.pathConstraints[this.pathConstraintIndex];if(h.active){if(n<this.frames[0]){switch(s){case t.MixBlend.setup:h.position=h.data.position;break;case t.MixBlend.first:h.position+=(h.data.position-h.position)*i}return}var l=this.getCurveValue(n);s==t.MixBlend.setup?h.position=h.data.position+(l-h.data.position)*i:h.position+=(l-h.position)*i}},r}(tv),t3=function(e){function r(t,r,n){var a=e.call(this,t,r,tm.pathConstraintSpacing+"|"+n)||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=n,a}return te(r,e),r.prototype.apply=function(e,r,n,a,i,s,o){var h=e.pathConstraints[this.pathConstraintIndex];if(h.active){if(n<this.frames[0]){switch(s){case t.MixBlend.setup:h.spacing=h.data.spacing;break;case t.MixBlend.first:h.spacing+=(h.data.spacing-h.spacing)*i}return}var l=this.getCurveValue(n);s==t.MixBlend.setup?h.spacing=h.data.spacing+(l-h.data.spacing)*i:h.spacing+=(l-h.spacing)*i}},r}(tv),tV=function(e){function r(t,r,n){var a=e.call(this,t,r,[tm.pathConstraintMix+"|"+n])||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=n,a}return te(r,e),r.prototype.getFrameEntries=function(){return 4},r.prototype.setFrame=function(t,e,r,n,a){var i=this.frames;i[t<<=2]=e,i[t+1]=r,i[t+2]=n,i[t+3]=a},r.prototype.apply=function(e,r,n,a,i,s,o){var h,l,c,u=e.pathConstraints[this.pathConstraintIndex];if(u.active){var d=this.frames;if(n<d[0]){switch(s){case t.MixBlend.setup:u.mixRotate=u.data.mixRotate,u.mixX=u.data.mixX,u.mixY=u.data.mixY;break;case t.MixBlend.first:u.mixRotate+=(u.data.mixRotate-u.mixRotate)*i,u.mixX+=(u.data.mixX-u.mixX)*i,u.mixY+=(u.data.mixY-u.mixY)*i}return}var f=t$.search(d,n,4),p=this.curves[f>>2];switch(p){case 0:var m=d[f];h=d[f+1],l=d[f+2],c=d[f+3];var $=(n-m)/(d[f+4]-m);h+=(d[f+4+1]-h)*$,l+=(d[f+4+2]-l)*$,c+=(d[f+4+3]-c)*$;break;case 1:h=d[f+1],l=d[f+2],c=d[f+3];break;default:h=this.getBezierValue(n,f,1,p-2),l=this.getBezierValue(n,f,2,p+18-2),c=this.getBezierValue(n,f,3,p+36-2)}if(s==t.MixBlend.setup){var g=u.data;u.mixRotate=g.mixRotate+(h-g.mixRotate)*i,u.mixX=g.mixX+(l-g.mixX)*i,u.mixY=g.mixY+(c-g.mixY)*i}else u.mixRotate+=(h-u.mixRotate)*i,u.mixX+=(l-u.mixX)*i,u.mixY+=(c-u.mixY)*i}},r}(tg),tN=function(){function e(t){this.data=null,this.tracks=[],this.timeScale=1,this.unkeyedState=0,this.events=[],this.listeners=[],this.queue=new t4(this),this.propertyIDs=new Y,this.animationsChanged=!1,this.trackEntryPool=new V(function(){return new tO}),this.data=t}return e.emptyAnimation=function(){return tG||(tG=new tp("<empty>",[],0)),tG},e.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,r=0,n=e.length;r<n;r++){var a=e[r];if(a){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var i=t*a.timeScale;if(a.delay>0){if(a.delay-=i,a.delay>0)continue;i=-a.delay,a.delay=0}var s=a.next;if(s){var o=a.trackLast-s.delay;if(o>=0){for(s.delay=0,s.trackTime+=0==a.timeScale?0:(o/a.timeScale+t)*s.timeScale,a.trackTime+=i,this.setCurrent(r,s,!0);s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&!a.mixingFrom){e[r]=null,this.queue.end(a),this.clearNext(a);continue}if(a.mixingFrom&&this.updateMixingFrom(a,t)){var h=a.mixingFrom;for(a.mixingFrom=null,h&&(h.mixingTo=null);h;)this.queue.end(h),h=h.mixingFrom}a.trackTime+=i}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,e){var r=t.mixingFrom;if(!r)return!0;var n=this.updateMixingFrom(r,e);return(r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration)?((0==r.totalAlpha||0==t.mixDuration)&&(t.mixingFrom=r.mixingFrom,r.mixingFrom&&(r.mixingFrom.mixingTo=t),t.interruptAlpha=r.interruptAlpha,this.queue.end(r)),n):(r.trackTime+=e*r.timeScale,t.mixTime+=e,!1)},e.prototype.apply=function(e){if(!e)throw Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var r=this.events,n=this.tracks,a=!1,i=0,s=n.length;i<s;i++){var o=n[i];if(o&&!(o.delay>0)){a=!0;var h=0==i?t.MixBlend.first:o.mixBlend,l=o.alpha;o.mixingFrom?l*=this.applyMixingFrom(o,e,h):o.trackTime>=o.trackEnd&&!o.next&&(l=0);var c=o.animationLast,u=o.getAnimationTime(),d=u,f=r;o.reverse&&(d=o.animation.duration-d,f=null);var p=o.animation.timelines,m=p.length;if(0==i&&1==l||h==t.MixBlend.add)for(var $=0;$<m;$++){L.webkit602BugfixHelper(l,h);var g=p[$];g instanceof tX?this.applyAttachmentTimeline(g,e,d,h,!0):g.apply(e,c,d,f,l,h,t.MixDirection.mixIn)}else{var v=o.timelineMode,x=o.timelinesRotation.length!=m<<1;x&&(o.timelinesRotation.length=m<<1);for(var $=0;$<m;$++){var y=p[$],b=v[$]==t8?h:t.MixBlend.setup;y instanceof ty?this.applyRotateTimeline(y,e,d,l,b,o.timelinesRotation,$<<1,x):y instanceof tX?this.applyAttachmentTimeline(y,e,d,h,!0):(L.webkit602BugfixHelper(l,h),y.apply(e,c,d,f,l,b,t.MixDirection.mixIn))}}this.queueEvents(o,u),r.length=0,o.nextAnimationLast=u,o.nextTrackLast=o.trackTime}}for(var _=this.unkeyedState+tz,w=e.slots,k=0,S=e.slots.length;k<S;k++){var M=w[k];if(M.attachmentState==_){var T=M.data.attachmentName;M.setAttachment(T?e.getAttachment(M.data.index,T):null)}}return this.unkeyedState+=2,this.queue.drain(),a},e.prototype.applyMixingFrom=function(e,r,n){var a=e.mixingFrom;a.mixingFrom&&this.applyMixingFrom(a,r,n);var i=0;0==e.mixDuration?(i=1,n==t.MixBlend.first&&(n=t.MixBlend.setup)):((i=e.mixTime/e.mixDuration)>1&&(i=1),n!=t.MixBlend.first&&(n=a.mixBlend));var s=i<a.attachmentThreshold,o=i<a.drawOrderThreshold,h=a.animation.timelines,l=h.length,c=a.alpha*e.interruptAlpha,u=c*(1-i),d=a.animationLast,f=a.getAnimationTime(),p=f,m=null;if(a.reverse?p=a.animation.duration-p:i<a.eventThreshold&&(m=this.events),n==t.MixBlend.add)for(var $=0;$<l;$++)h[$].apply(r,d,p,m,u,n,t.MixDirection.mixOut);else{var g=a.timelineMode,v=a.timelineHoldMix,x=a.timelinesRotation.length!=l<<1;x&&(a.timelinesRotation.length=l<<1),a.totalAlpha=0;for(var $=0;$<l;$++){var y=h[$],b=t.MixDirection.mixOut,_=void 0,w=0;switch(g[$]){case t8:if(!o&&y instanceof tD)continue;_=n,w=u;break;case t2:_=t.MixBlend.setup,w=u;break;case tU:_=n,w=c;break;case tq:_=t.MixBlend.setup,w=c;break;default:_=t.MixBlend.setup;var k=v[$];w=c*Math.max(0,1-k.mixTime/k.mixDuration)}a.totalAlpha+=w,y instanceof ty?this.applyRotateTimeline(y,r,p,w,_,a.timelinesRotation,$<<1,x):y instanceof tX?this.applyAttachmentTimeline(y,r,p,_,s):(L.webkit602BugfixHelper(w,n),o&&y instanceof tD&&_==t.MixBlend.setup&&(b=t.MixDirection.mixIn),y.apply(r,d,p,m,w,_,b))}}return e.mixDuration>0&&this.queueEvents(a,f),this.events.length=0,a.nextAnimationLast=f,a.nextTrackLast=a.trackTime,i},e.prototype.applyAttachmentTimeline=function(e,r,n,a,i){var s=r.slots[e.slotIndex];s.bone.active&&(n<e.frames[0]?(a==t.MixBlend.setup||a==t.MixBlend.first)&&this.setAttachment(r,s,s.data.attachmentName,i):this.setAttachment(r,s,e.attachmentNames[t$.search1(e.frames,n)],i),s.attachmentState<=this.unkeyedState&&(s.attachmentState=this.unkeyedState+tz))},e.prototype.setAttachment=function(t,e,r,n){e.setAttachment(r?t.getAttachment(e.data.index,r):null),n&&(e.attachmentState=this.unkeyedState+t7)},e.prototype.applyRotateTimeline=function(e,r,n,a,i,s,o,h){if(h&&(s[o]=0),1==a){e.apply(r,0,n,null,1,i,t.MixDirection.mixIn);return}var l=r.bones[e.boneIndex];if(l.active){var c=e.frames,u=0,d=0;if(n<c[0])switch(i){case t.MixBlend.setup:l.rotation=l.data.rotation;default:return;case t.MixBlend.first:u=l.rotation,d=l.data.rotation}else u=i==t.MixBlend.setup?l.data.rotation:l.rotation,d=l.data.rotation+e.getCurveValue(n);var f=0,p=d-u;if(0==(p-=(16384-(16384.499999999996-p/360|0))*360))f=s[o];else{var m=0,$=0;h?(m=0,$=p):(m=s[o],$=s[o+1]);var g=p>0,v=m>=0;X.signum($)!=X.signum(p)&&90>=Math.abs($)&&(Math.abs(m)>180&&(m+=360*X.signum(m)),v=g),f=p+m-m%360,v!=g&&(f+=360*X.signum(m)),s[o]=f}s[o+1]=p,l.rotation=u+f*a}},e.prototype.queueEvents=function(t,e){for(var r=t.animationStart,n=t.animationEnd,a=n-r,i=t.trackLast%a,s=this.events,o=0,h=s.length;o<h;o++){var l=s[o];if(l.time<i)break;l.time>n||this.queue.event(t,l)}var c=!1;for((c=t.loop?0==a||i>t.trackTime%a:e>=n&&t.animationLast<n)&&this.queue.complete(t);o<h;o++){var u=s[o];u.time<r||this.queue.event(t,u)}},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,r=this.tracks.length;e<r;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(e){this.queue.end(e),this.clearNext(e);for(var r=e;;){var n=r.mixingFrom;if(!n)break;this.queue.end(n),r.mixingFrom=null,r.mixingTo=null,r=n}this.tracks[e.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,e,r){var n=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,n&&(r&&this.queue.interrupt(n),e.mixingFrom=n,n.mixingTo=e,e.mixTime=0,n.mixingFrom&&n.mixDuration>0&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)},e.prototype.setAnimation=function(t,e,r){void 0===r&&(r=!1);var n=this.data.skeletonData.findAnimation(e);if(!n)throw Error("Animation not found: "+e);return this.setAnimationWith(t,n,r)},e.prototype.setAnimationWith=function(t,e,r){if(void 0===r&&(r=!1),!e)throw Error("animation cannot be null.");var n=!0,a=this.expandToIndex(t);a&&(-1==a.nextTrackLast?(this.tracks[t]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.clearNext(a),a=a.mixingFrom,n=!1):this.clearNext(a));var i=this.trackEntry(t,e,r,a);return this.setCurrent(t,i,n),this.queue.drain(),i},e.prototype.addAnimation=function(t,e,r,n){void 0===r&&(r=!1),void 0===n&&(n=0);var a=this.data.skeletonData.findAnimation(e);if(!a)throw Error("Animation not found: "+e);return this.addAnimationWith(t,a,r,n)},e.prototype.addAnimationWith=function(t,e,r,n){if(void 0===r&&(r=!1),void 0===n&&(n=0),!e)throw Error("animation cannot be null.");var a=this.expandToIndex(t);if(a)for(;a.next;)a=a.next;var i=this.trackEntry(t,e,r,a);return a?(a.next=i,i.previous=a,n<=0&&(n+=a.getTrackComplete()-i.mixDuration)):(this.setCurrent(t,i,!0),this.queue.drain()),i.delay=n,i},e.prototype.setEmptyAnimation=function(t,r){void 0===r&&(r=0);var n=this.setAnimationWith(t,e.emptyAnimation(),!1);return n.mixDuration=r,n.trackEnd=r,n},e.prototype.addEmptyAnimation=function(t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var a=this.addAnimationWith(t,e.emptyAnimation(),!1,n);return n<=0&&(a.delay+=a.mixDuration-r),a.mixDuration=r,a.trackEnd=r,a},e.prototype.setEmptyAnimations=function(t){void 0===t&&(t=0);var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,n=this.tracks.length;r<n;r++){var a=this.tracks[r];a&&this.setEmptyAnimation(a.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},e.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(L.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},e.prototype.trackEntry=function(e,r,n,a){var i=this.trackEntryPool.obtain();return i.reset(),i.trackIndex=e,i.animation=r,i.loop=n,i.holdPrevious=!1,i.eventThreshold=0,i.attachmentThreshold=0,i.drawOrderThreshold=0,i.animationStart=0,i.animationEnd=r.duration,i.animationLast=-1,i.nextAnimationLast=-1,i.delay=0,i.trackTime=0,i.trackLast=-1,i.nextTrackLast=-1,i.trackEnd=Number.MAX_VALUE,i.timeScale=1,i.alpha=1,i.interruptAlpha=1,i.mixTime=0,i.mixDuration=a?this.data.getMix(a.animation,r):0,i.mixBlend=t.MixBlend.replace,i},e.prototype.clearNext=function(t){for(var e=t.next;e;)this.queue.dispose(e),e=e.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=this.tracks,r=0,n=e.length;r<n;r++){var a=e[r];if(a){for(;a.mixingFrom;)a=a.mixingFrom;do a.mixingTo&&a.mixBlend==t.MixBlend.add||this.computeHold(a),a=a.mixingTo;while(a)}}},e.prototype.computeHold=function(t){var e=t.mixingTo,r=t.animation.timelines,n=t.animation.timelines.length,a=t.timelineMode;a.length=n;var i=t.timelineHoldMix;i.length=0;var s=this.propertyIDs;if(e&&e.holdPrevious){for(var o=0;o<n;o++)a[o]=s.addAll(r[o].getPropertyIds())?tq:tU;return}outer:for(var o=0;o<n;o++){var h=r[o],l=h.getPropertyIds();if(s.addAll(l)){if(!e||h instanceof tX||h instanceof tD||h instanceof tR||!e.animation.hasTimeline(l))a[o]=t2;else{for(var c=e.mixingTo;c;c=c.mixingTo)if(!c.animation.hasTimeline(l)){if(t.mixDuration>0){a[o]=t5,i[o]=c;continue outer}break}a[o]=tq}}else a[o]=t8}},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(!t)throw Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.prototype.setAnimationByName=function(t,r,n){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,r,n)},e.prototype.addAnimationByName=function(t,r,n,a){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,r,n,a)},e.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},e.prototype.hasAnimationByName=function(t){return e.deprecatedWarning3||(e.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e.deprecatedWarning3=!1,e}(),tO=function(){function e(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=t.MixBlend.replace,this.timelineMode=[],this.timelineHoldMix=[],this.timelinesRotation=[]}return e.prototype.reset=function(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},e.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},e.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},e.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},e.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},e.prototype.getTrackComplete=function(){var t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime},Object.defineProperty(e.prototype,"time",{get:function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),e.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e}(),t4=function(){function e(t){this.objects=[],this.drainDisabled=!1,this.animState=null,this.animState=t}return e.prototype.start=function(e){this.objects.push(t.EventType.start),this.objects.push(e),this.animState.animationsChanged=!0},e.prototype.interrupt=function(e){this.objects.push(t.EventType.interrupt),this.objects.push(e)},e.prototype.end=function(e){this.objects.push(t.EventType.end),this.objects.push(e),this.animState.animationsChanged=!0},e.prototype.dispose=function(e){this.objects.push(t.EventType.dispose),this.objects.push(e)},e.prototype.complete=function(e){this.objects.push(t.EventType.complete),this.objects.push(e)},e.prototype.event=function(e,r){this.objects.push(t.EventType.event),this.objects.push(e),this.objects.push(r)},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,r=this.animState.listeners,n=0;n<e.length;n+=2){var a=e[n],i=e[n+1];switch(a){case t.EventType.start:i.listener&&i.listener.start&&i.listener.start(i);for(var s=0;s<r.length;s++)r[s].start&&r[s].start(i);break;case t.EventType.interrupt:i.listener&&i.listener.interrupt&&i.listener.interrupt(i);for(var s=0;s<r.length;s++)r[s].interrupt&&r[s].interrupt(i);break;case t.EventType.end:i.listener&&i.listener.end&&i.listener.end(i);for(var s=0;s<r.length;s++)r[s].end&&r[s].end(i);case t.EventType.dispose:i.listener&&i.listener.dispose&&i.listener.dispose(i);for(var s=0;s<r.length;s++)r[s].dispose&&r[s].dispose(i);this.animState.trackEntryPool.free(i);break;case t.EventType.complete:i.listener&&i.listener.complete&&i.listener.complete(i);for(var s=0;s<r.length;s++)r[s].complete&&r[s].complete(i);break;case t.EventType.event:var o=e[n+++2];i.listener&&i.listener.event&&i.listener.event(i,o);for(var s=0;s<r.length;s++)r[s].event&&r[s].event(i,o)}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e}();t.EventType=void 0,(tr=t.EventType||(t.EventType={}))[tr.start=0]="start",tr[tr.interrupt=1]="interrupt",tr[tr.end=2]="end",tr[tr.dispose=3]="dispose",tr[tr.complete=4]="complete",tr[tr.event=5]="event";var tW,t6=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}(),t8=0,t2=1,tU=2,tq=3,t5=4,tz=1,t7=2,tG=null,tH=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,r){var n=this.skeletonData.findAnimation(t);if(null==n)throw Error("Animation not found: "+t);var a=this.skeletonData.findAnimation(e);if(null==a)throw Error("Animation not found: "+e);this.setMixWith(n,a,r)},t.prototype.setMixWith=function(t,e,r){if(null==t)throw Error("from cannot be null.");if(null==e)throw Error("to cannot be null.");var n=t.name+"."+e.name;this.animationToMixTime[n]=r},t.prototype.getMix=function(t,e){var r=t.name+"."+e.name,n=this.animationToMixTime[r];return void 0===n?this.defaultMix:n},t}(),tj=function(){function t(t){this.atlas=t}return t.prototype.newRegionAttachment=function(t,e,r){var n=this.atlas.findRegion(r);if(null==n)throw Error("Region not found in atlas: "+r+" (region attachment: "+e+")");var a=new tu(e);return a.region=n,a},t.prototype.newMeshAttachment=function(t,e,r){var n=this.atlas.findRegion(r);if(null==n)throw Error("Region not found in atlas: "+r+" (mesh attachment: "+e+")");var a=new to(e);return a.region=n,a},t.prototype.newBoundingBoxAttachment=function(t,e){return new ti(e)},t.prototype.newPathAttachment=function(t,e){return new th(e)},t.prototype.newPointAttachment=function(t,e){return new tl(e)},t.prototype.newClippingAttachment=function(t,e){return new ts(e)},t}(),tJ=function(){function e(t,e,r){if(this.matrix=new a.Matrix,this.data=null,this.skeleton=null,this.parent=null,this.children=[],this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.sorted=!1,this.active=!1,!t)throw Error("data cannot be null.");if(!e)throw Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=r,this.setToSetupPose()}return Object.defineProperty(e.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),e.prototype.isActive=function(){return this.active},e.prototype.update=function(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(e,r,n,a,i,s,o){this.ax=e,this.ay=r,this.arotation=n,this.ascaleX=a,this.ascaleY=i,this.ashearX=s,this.ashearY=o;var h=this.parent,l=this.matrix,c=this.skeleton.scaleX,u=q.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(!h){var d=this.skeleton,f=n+90+o;l.a=X.cosDeg(n+s)*a*c,l.c=X.cosDeg(f)*i*c,l.b=X.sinDeg(n+s)*a*u,l.d=X.sinDeg(f)*i*u,l.tx=e*c+d.x,l.ty=r*u+d.y;return}var p=h.matrix.a,m=h.matrix.c,$=h.matrix.b,g=h.matrix.d;switch(l.tx=p*e+m*r+h.matrix.tx,l.ty=$*e+g*r+h.matrix.ty,this.data.transformMode){case t.TransformMode.Normal:var f=n+90+o,v=X.cosDeg(n+s)*a,x=X.cosDeg(f)*i,y=X.sinDeg(n+s)*a,b=X.sinDeg(f)*i;l.a=p*v+m*y,l.c=p*x+m*b,l.b=$*v+g*y,l.d=$*x+g*b;return;case t.TransformMode.OnlyTranslation:var f=n+90+o;l.a=X.cosDeg(n+s)*a,l.c=X.cosDeg(f)*i,l.b=X.sinDeg(n+s)*a,l.d=X.sinDeg(f)*i;break;case t.TransformMode.NoRotationOrReflection:var _=p*p+$*$,w=0;_>1e-4?(_=Math.abs(p*g-m*$)/_,p/=c,$/=u,m=$*_,g=p*_,w=Math.atan2($,p)*X.radDeg):(p=0,$=0,w=90-Math.atan2(g,m)*X.radDeg);var k=n+s-w,S=n+o-w+90,v=X.cosDeg(k)*a,x=X.cosDeg(S)*i,y=X.sinDeg(k)*a,b=X.sinDeg(S)*i;l.a=p*v-m*y,l.c=p*x-m*b,l.b=$*v+g*y,l.d=$*x+g*b;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var M=X.cosDeg(n),T=X.sinDeg(n),B=(p*M+m*T)/c,C=($*M+g*T)/u,_=Math.sqrt(B*B+C*C);_>1e-5&&(_=1/_),B*=_,C*=_,_=Math.sqrt(B*B+C*C),this.data.transformMode==t.TransformMode.NoScale&&p*g-m*$<0!=(c<0!=u<0)&&(_=-_);var I=Math.PI/2+Math.atan2(C,B),A=Math.cos(I)*_,Y=Math.sin(I)*_,v=X.cosDeg(s)*a,x=X.cosDeg(90+o)*i,y=X.sinDeg(s)*a,b=X.sinDeg(90+o)*i;l.a=B*v+A*y,l.c=B*x+A*b,l.b=C*v+Y*y,l.d=C*x+Y*b}l.a*=c,l.c*=c,l.b*=u,l.d*=u},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*X.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*X.radDeg},e.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.b*t.b)},e.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.c*t.c+t.d*t.d)},e.prototype.updateAppliedTransform=function(){var t=this.parent,e=this.matrix;if(!t){this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*X.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*X.radDeg;return}var r=t.matrix,n=1/(r.a*r.d-r.b*r.c),a=e.tx-r.tx,i=e.ty-r.ty;this.ax=a*r.d*n-i*r.c*n,this.ay=i*r.a*n-a*r.b*n;var s=n*r.d,o=n*r.a,h=n*r.c,l=n*r.b,c=s*e.a-h*e.b,u=s*e.c-h*e.d,d=o*e.b-l*e.a,f=o*e.d-l*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+d*d),this.ascaleX>1e-4){var p=c*f-u*d;this.ascaleY=p/this.ascaleX,this.ashearY=Math.atan2(c*u+d*f,p)*X.radDeg,this.arotation=Math.atan2(d,c)*X.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(u*u+f*f),this.ashearY=0,this.arotation=90-Math.atan2(f,u)*X.radDeg},e.prototype.worldToLocal=function(t){var e=this.matrix,r=e.a,n=e.c,a=e.b,i=e.d,s=1/(r*i-n*a),o=t.x-e.tx,h=t.y-e.ty;return t.x=o*i*s-h*n*s,t.y=h*r*s-o*a*s,t},e.prototype.localToWorld=function(t){var e=this.matrix,r=t.x,n=t.y;return t.x=r*e.a+n*e.c+e.tx,t.y=r*e.b+n*e.d+e.ty,t},e.prototype.worldToLocalRotation=function(t){var e=X.sinDeg(t),r=X.cosDeg(t),n=this.matrix;return Math.atan2(n.a*e-n.b*r,n.d*r-n.c*e)*X.radDeg},e.prototype.localToWorldRotation=function(t){t-=this.rotation-this.shearX;var e=X.sinDeg(t),r=X.cosDeg(t),n=this.matrix;return Math.atan2(r*n.b+e*n.d,r*n.a+e*n.c)*X.radDeg},e.prototype.rotateWorld=function(t){var e=this.matrix,r=e.a,n=e.c,a=e.b,i=e.d,s=X.cosDeg(t),o=X.sinDeg(t);e.a=s*r-o*a,e.c=s*n-o*i,e.b=o*r+s*a,e.d=o*n+s*i},e}(),tK=function e(r,n,a){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=t.TransformMode.Normal,this.skinRequired=!1,this.color=new F,r<0)throw Error("index must be >= 0.");if(null==n)throw Error("name cannot be null.");this.index=r,this.name=n,this.parent=a},tQ=function t(e,r,n){this.name=e,this.order=r,this.skinRequired=n},tZ=function t(e,r){if(null==r)throw Error("data cannot be null.");this.time=e,this.data=r},t9=function t(e){this.name=e},et=function(){function e(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw Error("data cannot be null.");if(!e)throw Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=[];for(var r=0;r<t.bones.length;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.update=function(){if(0!=this.mix){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}},e.prototype.apply1=function(e,r,n,a,i,s,o){var h=e.parent.matrix,l=h.a,c=h.c,u=h.b,d=h.d,f=-e.ashearX-e.arotation,p=0,m=0,$=e.skeleton.scaleX,g=q.yDown?-e.skeleton.scaleY:e.skeleton.scaleY;switch(e.data.transformMode){case t.TransformMode.OnlyTranslation:p=r-e.worldX,m=n-e.worldY,q.yDown&&(m=-m);break;case t.TransformMode.NoRotationOrReflection:var v=Math.abs(l*d-c*u)/(l*l+u*u),x=l/$,y=u/g;c=-y*v*$,d=x*v*g,f+=Math.atan2(y,x)*X.radDeg;default:var b=r-h.tx,_=n-h.ty,w=l*d-c*u;p=(b*d-_*c)/w-e.ax,m=(_*l-b*u)/w-e.ay}f+=Math.atan2(m,p)*X.radDeg,e.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);var k=e.ascaleX,S=e.ascaleY;if(a||i){switch(e.data.transformMode){case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:p=r-e.worldX,m=n-e.worldY}var M=e.data.length*k,T=Math.sqrt(p*p+m*m);if(a&&T<M||i&&T>M&&M>1e-4){var v=(T/M-1)*o+1;k*=v,s&&(S*=v)}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+f*o,k,S,e.ashearX,e.ashearY)},e.prototype.apply2=function(t,e,r,n,a,i,s,o,h){var l=t.ax,c=t.ay,u=t.ascaleX,d=t.ascaleY,f=u,p=d,m=e.ascaleX,$=t.matrix,g=0,v=0,x=0;u<0?(u=-u,g=180,x=-1):(g=0,x=1),d<0&&(d=-d,x=-x),m<0?(m=-m,v=180):v=0;var y=e.ax,b=0,_=0,w=0,k=$.a,S=$.c,M=$.b,T=$.d,B=1e-4>=Math.abs(u-d);!B||i?(b=0,_=k*y+$.tx,w=M*y+$.ty):(_=k*y+S*(b=e.ay)+$.tx,w=M*y+T*b+$.ty);var C=t.parent.matrix;k=C.a,S=C.c,M=C.b;var I,A,Y=1/(k*(T=C.d)-S*M),F=_-C.tx,P=w-C.ty,R=(F*T-P*S)*Y-l,D=(P*k-F*M)*Y-c,L=Math.sqrt(R*R+D*D),E=e.data.length*m;if(L<1e-4){this.apply1(t,r,n,!1,i,!1,h),e.updateWorldTransformWith(y,b,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);return}var V=((F=r-C.tx)*T-(P=n-C.ty)*S)*Y-l,N=(P*k-F*M)*Y-c,O=V*V+N*N;if(0!=o){o*=u*(m+1)*.5;var W=Math.sqrt(O),U=W-L-E*u+o;if(U>0){var q=Math.min(1,U/(2*o))-1;q=(U-o*(1-q*q))/W,V-=q*V,N-=q*N,O=V*V+N*N}}outer:if(B){var z=(O-L*L-(E*=u)*E)/(2*L*E);z<-1?(z=-1,A=Math.PI*a):z>1?(z=1,A=0,i&&(f*=k=(Math.sqrt(O)/(L+E)-1)*h+1,s&&(p*=k))):A=Math.acos(z)*a,I=Math.atan2(N*(k=L+E*z)-V*(S=E*Math.sin(A)),V*k+N*S)}else{var G=(k=u*E)*k,H=(S=d*E)*S,j=Math.atan2(N,V);M=H*L*L+G*O-G*H;var J=-2*H*L,K=H-G;if((T=J*J-4*K*M)>=0){var Q=Math.sqrt(T);J<0&&(Q=-Q);var Z=(Q=-(.5*(J+Q)))/K,tt=M/Q,te=Math.abs(Z)<Math.abs(tt)?Z:tt;if(te*te<=O){I=j-Math.atan2(P=Math.sqrt(O-te*te)*a,te),A=Math.atan2(P/d,(te-L)/u);break outer}}var tr=X.PI,tn=L-k,ta=tn*tn,ti=0,ts=0,to=L+k,th=to*to,tl=0;(M=-k*L/(G-H))>=-1&&M<=1&&((T=(F=k*Math.cos(M=Math.acos(M))+L)*F+(P=S*Math.sin(M))*P)<ta&&(tr=M,ta=T,tn=F,ti=P),T>th&&(ts=M,th=T,to=F,tl=P)),O<=(ta+th)*.5?(I=j-Math.atan2(ti*a,tn),A=tr*a):(I=j-Math.atan2(tl*a,to),A=ts*a)}var tc=Math.atan2(b,y)*x,tu=t.arotation;(I=(I-tc)*X.radDeg+g-tu)>180?I-=360:I<-180&&(I+=360),t.updateWorldTransformWith(l,c,tu+I*h,f,p,0,0),tu=e.arotation,(A=((A+tc)*X.radDeg-e.ashearX)*x+v-tu)>180?A-=360:A<-180&&(A+=360),e.updateWorldTransformWith(y,b,tu+A*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)},e}(),ee=function(t){function e(e){var r=t.call(this,e,0,!1)||this;return r.bones=[],r.bendDirection=1,r.compress=!1,r.stretch=!1,r.uniform=!1,r.mix=1,r.softness=0,r}return te(e,t),e}(tQ),er=function(t){function e(e){var r=t.call(this,e,0,!1)||this;return r.bones=[],r.mixRotate=0,r.mixX=0,r.mixY=0,r}return te(e,t),e}(tQ);t.SpacingMode=void 0,(tW=t.SpacingMode||(t.SpacingMode={}))[tW.Length=0]="Length",tW[tW.Fixed=1]="Fixed",tW[tW.Percent=2]="Percent",tW[tW.Proportional=3]="Proportional";var en=function(){function e(t,e){if(this.data=null,this.bones=null,this.target=null,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=[],this.positions=[],this.world=[],this.curves=[],this.lengths=[],this.segments=[],this.active=!1,!t)throw Error("data cannot be null.");if(!e)throw Error("skeleton cannot be null.");this.data=t,this.bones=[];for(var r=0,n=t.bones.length;r<n;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}return e.prototype.isActive=function(){return this.active},e.prototype.update=function(){var r=this.target.getAttachment();if(r instanceof th){var n=this.mixRotate,a=this.mixX,i=this.mixY;if(0!=n||0!=a||0!=i){var s=this.data,o=s.rotateMode==t.RotateMode.Tangent,h=s.rotateMode==t.RotateMode.ChainScale,l=this.bones,c=l.length,u=o?c:c+1,d=L.setArraySize(this.spaces,u),f=h?this.lengths=L.setArraySize(this.lengths,c):null,p=this.spacing;switch(s.spacingMode){case t.SpacingMode.Percent:if(h)for(var m=0,$=u-1;m<$;m++){var g=l[m],v=g.data.length;if(v<e.epsilon)f[m]=0;else{var x=v*g.matrix.a,y=v*g.matrix.b;f[m]=Math.sqrt(x*x+y*y)}}L.arrayFill(d,1,u,p);break;case t.SpacingMode.Proportional:for(var b=0,m=0,$=u-1;m<$;){var g=l[m],v=g.data.length;if(v<e.epsilon)h&&(f[m]=0),d[++m]=p;else{var x=v*g.matrix.a,y=v*g.matrix.b,_=Math.sqrt(x*x+y*y);h&&(f[m]=_),d[++m]=_,b+=_}}if(b>0){b=u/b*p;for(var m=1;m<u;m++)d[m]*=b}break;default:for(var w=s.spacingMode==t.SpacingMode.Length,m=0,$=u-1;m<$;){var g=l[m],v=g.data.length;if(v<e.epsilon)h&&(f[m]=0),d[++m]=p;else{var x=v*g.matrix.a,y=v*g.matrix.b,k=Math.sqrt(x*x+y*y);h&&(f[m]=k),d[++m]=(w?v+p:p)*k/v}}}var S=this.computeWorldPositions(r,u,o),M=S[0],T=S[1],B=s.offsetRotation,C=!1;if(0==B)C=s.rotateMode==t.RotateMode.Chain;else{C=!1;var I=this.target.bone.matrix;B*=I.a*I.d-I.b*I.c>0?X.degRad:-X.degRad}for(var m=0,I=3;m<c;m++,I+=3){var g=l[m],A=g.matrix;A.tx+=(M-A.tx)*a,A.ty+=(T-A.ty)*i;var x=S[I],y=S[I+1],Y=x-M,F=y-T;if(h){var P=f[m];if(0!=P){var R=(Math.sqrt(Y*Y+F*F)/P-1)*n+1;A.a*=R,A.b*=R}}if(M=x,T=y,n>0){var D=A.a,E=A.c,V=A.b,N=A.d,O=0,W=0,U=0;if(O=o?S[I-1]:0==d[m+1]?S[I+2]:Math.atan2(F,Y),O-=Math.atan2(V,D),C){W=Math.cos(O),U=Math.sin(O);var q=g.data.length;M+=(q*(W*D-U*V)-Y)*n,T+=(q*(U*D+W*V)-F)*n}else O+=B;O>X.PI?O-=X.PI2:O<-X.PI&&(O+=X.PI2),O*=n,W=Math.cos(O),U=Math.sin(O),A.a=W*D-U*V,A.c=W*E-U*N,A.b=U*D+W*V,A.d=U*E+W*N}g.updateAppliedTransform()}}}},e.prototype.computeWorldPositions=function(r,n,a){var i,s=this.target,o=this.position,h=this.spaces,l=L.setArraySize(this.positions,3*n+2),c=null,u=r.closed,d=r.worldVerticesLength,f=d/6,p=e.NONE;if(!r.constantSpeed){var m,$=r.lengths,g=$[f-=u?1:2];switch(this.data.positionMode==t.PositionMode.Percent&&(o*=g),this.data.spacingMode){case t.SpacingMode.Percent:m=g;break;case t.SpacingMode.Proportional:m=g/n;break;default:m=1}c=L.setArraySize(this.world,8);for(var v=0,x=0,y=0;v<n;v++,x+=3){var b=h[v]*m,_=o+=b;if(u)(_%=g)<0&&(_+=g),y=0;else if(_<0){p!=e.BEFORE&&(p=e.BEFORE,r.computeWorldVertices(s,2,4,c,0,2)),this.addBeforePosition(_,c,0,l,x);continue}else if(_>g){p!=e.AFTER&&(p=e.AFTER,r.computeWorldVertices(s,d-6,4,c,0,2)),this.addAfterPosition(_-g,c,0,l,x);continue}for(;;y++){var w=$[y];if(!(_>w)){if(0==y)_/=w;else{var k=$[y-1];_=(_-k)/(w-k)}break}}y!=p&&(p=y,u&&y==f?(r.computeWorldVertices(s,d-4,4,c,0,2),r.computeWorldVertices(s,0,4,c,4,2)):r.computeWorldVertices(s,6*y+2,8,c,0,2)),this.addCurvePosition(_,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],l,x,a||v>0&&0==b)}return l}u?(d+=2,c=L.setArraySize(this.world,d),r.computeWorldVertices(s,2,d-4,c,0,2),r.computeWorldVertices(s,0,2,c,d-4,2),c[d-2]=c[0],c[d-1]=c[1]):(f--,d-=4,c=L.setArraySize(this.world,d),r.computeWorldVertices(s,2,d,c,0,2));for(var S=L.setArraySize(this.curves,f),M=0,T=c[0],B=c[1],C=0,I=0,A=0,Y=0,F=0,X=0,P=0,R=0,D=0,E=0,V=0,N=0,O=0,W=0,v=0,U=2;v<f;v++,U+=6)C=c[U],I=c[U+1],A=c[U+2],Y=c[U+3],F=c[U+4],X=c[U+5],P=(T-2*C+A)*.1875,R=(B-2*I+Y)*.1875,D=((C-A)*3-T+F)*.09375,E=((I-Y)*3-B+X)*.09375,V=2*P+D,N=2*R+E,M+=Math.sqrt((O=(C-T)*.75+P+.16666667*D)*O+(W=(I-B)*.75+R+.16666667*E)*W),O+=V,W+=N,V+=D,N+=E,M+=Math.sqrt(O*O+W*W),O+=V,W+=N,M+=Math.sqrt(O*O+W*W),O+=V+D,W+=N+E,M+=Math.sqrt(O*O+W*W),S[v]=M,T=F,B=X;switch(this.data.positionMode==t.PositionMode.Percent&&(o*=M),this.data.spacingMode){case t.SpacingMode.Percent:i=M;break;case t.SpacingMode.Proportional:i=M/n;break;default:i=1}for(var q=this.segments,z=0,v=0,x=0,y=0,G=0;v<n;v++,x+=3){var b=h[v]*i,_=o+=b;if(u)(_%=M)<0&&(_+=M),y=0;else if(_<0){this.addBeforePosition(_,c,0,l,x);continue}else if(_>M){this.addAfterPosition(_-M,c,d-4,l,x);continue}for(;;y++){var H=S[y];if(!(_>H)){if(0==y)_/=H;else{var k=S[y-1];_=(_-k)/(H-k)}break}}if(y!=p){p=y;var j=6*y;for(T=c[j],B=c[j+1],C=c[j+2],I=c[j+3],A=c[j+4],Y=c[j+5],F=c[j+6],X=c[j+7],P=(T-2*C+A)*.03,R=(B-2*I+Y)*.03,D=((C-A)*3-T+F)*.006,E=((I-Y)*3-B+X)*.006,V=2*P+D,N=2*R+E,z=Math.sqrt((O=(C-T)*.3+P+.16666667*D)*O+(W=(I-B)*.3+R+.16666667*E)*W),q[0]=z,j=1;j<8;j++)O+=V,W+=N,V+=D,N+=E,z+=Math.sqrt(O*O+W*W),q[j]=z;O+=V,W+=N,z+=Math.sqrt(O*O+W*W),q[8]=z,O+=V+D,W+=N+E,z+=Math.sqrt(O*O+W*W),q[9]=z,G=0}for(_*=z;;G++){var J=q[G];if(!(_>J)){if(0==G)_/=J;else{var k=q[G-1];_=G+(_-k)/(J-k)}break}}this.addCurvePosition(.1*_,T,B,C,I,A,Y,F,X,l,x,a||v>0&&0==b)}return l},e.prototype.addBeforePosition=function(t,e,r,n,a){var i=e[r],s=e[r+1],o=e[r+2]-i,h=Math.atan2(e[r+3]-s,o);n[a]=i+t*Math.cos(h),n[a+1]=s+t*Math.sin(h),n[a+2]=h},e.prototype.addAfterPosition=function(t,e,r,n,a){var i=e[r+2],s=e[r+3],o=i-e[r],h=Math.atan2(s-e[r+1],o);n[a]=i+t*Math.cos(h),n[a+1]=s+t*Math.sin(h),n[a+2]=h},e.prototype.addCurvePosition=function(t,e,r,n,a,i,s,o,h,l,c,u){if(0==t||isNaN(t)){l[c]=e,l[c+1]=r,l[c+2]=Math.atan2(a-r,n-e);return}var d=t*t,f=d*t,p=1-t,m=p*p,$=m*p,g=p*t,v=3*g,x=p*v,y=v*t,b=e*$+n*x+i*y+o*f,_=r*$+a*x+s*y+h*f;l[c]=b,l[c+1]=_,u&&(t<.001?l[c+2]=Math.atan2(a-r,n-e):l[c+2]=Math.atan2(_-(r*m+a*g*2+s*d),b-(e*m+n*g*2+i*d)))},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e.epsilon=1e-5,e}(),ea=function(){function t(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new N,this.active=!1,!t)throw Error("data cannot be null.");if(!e)throw Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=[];for(var r=0;r<t.bones.length;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.update=function(){(0!=this.mixRotate||0!=this.mixX||0!=this.mixY||0!=this.mixScaleX||0!=this.mixScaleX||0!=this.mixShearY)&&(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())},t.prototype.applyAbsoluteWorld=function(){for(var t=this.mixRotate,e=this.mixX,r=this.mixY,n=this.mixScaleX,a=this.mixScaleY,i=this.mixShearY,s=0!=e||0!=r,o=this.target,h=o.matrix,l=h.a,c=h.c,u=h.b,d=h.d,f=l*d-c*u>0?X.degRad:-X.degRad,p=this.data.offsetRotation*f,m=this.data.offsetShearY*f,$=this.bones,g=0,v=$.length;g<v;g++){var x=$[g],y=x.matrix;if(0!=t){var b=y.a,_=y.c,w=y.b,k=y.d,S=Math.atan2(u,l)-Math.atan2(w,b)+p;S>X.PI?S-=X.PI2:S<-X.PI&&(S+=X.PI2);var M=Math.cos(S*=t),T=Math.sin(S);y.a=M*b-T*w,y.c=M*_-T*k,y.b=T*b+M*w,y.d=T*_+M*k}if(s){var B=this.temp;o.localToWorld(B.set(this.data.offsetX,this.data.offsetY)),y.tx+=(B.x-y.tx)*e,y.ty+=(B.y-y.ty)*r}if(0!=n){var C=Math.sqrt(y.a*y.a+y.b*y.b);0!=C&&(C=(C+(Math.sqrt(l*l+u*u)-C+this.data.offsetScaleX)*n)/C),y.a*=C,y.b*=C}if(0!=a){var C=Math.sqrt(y.c*y.c+y.d*y.d);0!=C&&(C=(C+(Math.sqrt(c*c+d*d)-C+this.data.offsetScaleY)*a)/C),y.c*=C,y.d*=C}if(i>0){var _=y.c,k=y.d,I=Math.atan2(k,_),S=Math.atan2(d,c)-Math.atan2(u,l)-(I-Math.atan2(y.b,y.a));S>X.PI?S-=X.PI2:S<-X.PI&&(S+=X.PI2),S=I+(S+m)*i;var C=Math.sqrt(_*_+k*k);y.c=Math.cos(S)*C,y.d=Math.sin(S)*C}x.updateAppliedTransform()}},t.prototype.applyRelativeWorld=function(){for(var t=this.mixRotate,e=this.mixX,r=this.mixY,n=this.mixScaleX,a=this.mixScaleY,i=this.mixShearY,s=0!=e||0!=r,o=this.target,h=o.matrix,l=h.a,c=h.c,u=h.b,d=h.d,f=l*d-c*u>0?X.degRad:-X.degRad,p=this.data.offsetRotation*f,m=this.data.offsetShearY*f,$=this.bones,g=0,v=$.length;g<v;g++){var x=$[g],y=x.matrix;if(0!=t){var b=y.a,_=y.c,w=y.b,k=y.d,S=Math.atan2(u,l)+p;S>X.PI?S-=X.PI2:S<-X.PI&&(S+=X.PI2);var M=Math.cos(S*=t),T=Math.sin(S);y.a=M*b-T*w,y.c=M*_-T*k,y.b=T*b+M*w,y.d=T*_+M*k}if(s){var B=this.temp;o.localToWorld(B.set(this.data.offsetX,this.data.offsetY)),y.tx+=B.x*e,y.ty+=B.y*r}if(0!=n){var C=(Math.sqrt(l*l+u*u)-1+this.data.offsetScaleX)*n+1;y.a*=C,y.b*=C}if(0!=a){var C=(Math.sqrt(c*c+d*d)-1+this.data.offsetScaleY)*a+1;y.c*=C,y.d*=C}if(i>0){var S=Math.atan2(d,c)-Math.atan2(u,l);S>X.PI?S-=X.PI2:S<-X.PI&&(S+=X.PI2);var _=y.c,k=y.d;S=Math.atan2(k,_)+(S-X.PI/2+m)*i;var C=Math.sqrt(_*_+k*k);y.c=Math.cos(S)*C,y.d=Math.sin(S)*C}x.updateAppliedTransform()}},t.prototype.applyAbsoluteLocal=function(){for(var t=this.mixRotate,e=this.mixX,r=this.mixY,n=this.mixScaleX,a=this.mixScaleY,i=this.mixShearY,s=this.target,o=this.bones,h=0,l=o.length;h<l;h++){var c=o[h],u=c.arotation;if(0!=t){var d=s.arotation-u+this.data.offsetRotation;d-=(16384-(16384.499999999996-d/360|0))*360,u+=d*t}var f=c.ax,p=c.ay;f+=(s.ax-f+this.data.offsetX)*e,p+=(s.ay-p+this.data.offsetY)*r;var m=c.ascaleX,$=c.ascaleY;0!=n&&0!=m&&(m=(m+(s.ascaleX-m+this.data.offsetScaleX)*n)/m),0!=a&&0!=$&&($=($+(s.ascaleY-$+this.data.offsetScaleY)*a)/$);var g=c.ashearY;if(0!=i){var d=s.ashearY-g+this.data.offsetShearY;d-=(16384-(16384.499999999996-d/360|0))*360,g+=d*i}c.updateWorldTransformWith(f,p,u,m,$,c.ashearX,g)}},t.prototype.applyRelativeLocal=function(){for(var t=this.mixRotate,e=this.mixX,r=this.mixY,n=this.mixScaleX,a=this.mixScaleY,i=this.mixShearY,s=this.target,o=this.bones,h=0,l=o.length;h<l;h++){var c=o[h],u=c.arotation+(s.arotation+this.data.offsetRotation)*t,d=c.ax+(s.ax+this.data.offsetX)*e,f=c.ay+(s.ay+this.data.offsetY)*r,p=c.ascaleX*((s.ascaleX-1+this.data.offsetScaleX)*n+1),m=c.ascaleY*((s.ascaleY-1+this.data.offsetScaleY)*a+1),$=c.ashearY+(s.ashearY+this.data.offsetShearY)*i;c.updateWorldTransformWith(d,f,u,p,m,c.ashearX,$)}},t}(),ei=function(){function t(t){if(this.data=null,this.bones=null,this.slots=null,this.drawOrder=null,this.ikConstraints=null,this.transformConstraints=null,this.pathConstraints=null,this._updateCache=[],this.skin=null,this.color=null,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!t)throw Error("data cannot be null.");this.data=t,this.bones=[];for(var e=0;e<t.bones.length;e++){var r=t.bones[e],n=void 0;if(r.parent){var a=this.bones[r.parent.index];n=new tJ(r,this,a),a.children.push(n)}else n=new tJ(r,this,null);this.bones.push(n)}this.slots=[],this.drawOrder=[];for(var e=0;e<t.slots.length;e++){var i=t.slots[e],n=this.bones[i.boneData.index],s=new tc(i,n);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=[];for(var e=0;e<t.ikConstraints.length;e++){var o=t.ikConstraints[e];this.ikConstraints.push(new et(o,this))}this.transformConstraints=[];for(var e=0;e<t.transformConstraints.length;e++){var h=t.transformConstraints[e];this.transformConstraints.push(new ea(h,this))}this.pathConstraints=[];for(var e=0;e<t.pathConstraints.length;e++){var l=t.pathConstraints[e];this.pathConstraints.push(new en(l,this))}this.color=new F(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0;for(var t=this.bones,e=0,r=t.length;e<r;e++){var n=t[e];n.sorted=n.data.skinRequired,n.active=!n.sorted}if(this.skin)for(var a=this.skin.bones,e=0,r=this.skin.bones.length;e<r;e++){var n=this.bones[a[e].index];do n.sorted=!1,n.active=!0,n=n.parent;while(n)}var i=this.ikConstraints,s=this.transformConstraints,o=this.pathConstraints,h=i.length,l=s.length,c=o.length,u=h+l+c;outer:for(var e=0;e<u;e++){for(var d=0;d<h;d++){var f=i[d];if(f.data.order==e){this.sortIkConstraint(f);continue outer}}for(var d=0;d<l;d++){var f=s[d];if(f.data.order==e){this.sortTransformConstraint(f);continue outer}}for(var d=0;d<c;d++){var f=o[d];if(f.data.order==e){this.sortPathConstraint(f);continue outer}}}for(var e=0,r=t.length;e<r;e++)this.sortBone(t[e])},t.prototype.sortIkConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&L.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target;this.sortBone(e);var r=t.bones,n=r[0];if(this.sortBone(n),1==r.length)this._updateCache.push(t),this.sortReset(n.children);else{var a=r[r.length-1];this.sortBone(a),this._updateCache.push(t),this.sortReset(n.children),a.sorted=!0}}},t.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&L.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,r=e.data.index,n=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,r,n),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,r,n);for(var a=0,i=this.data.skins.length;a<i;a++)this.sortPathConstraintAttachment(this.data.skins[a],r,n);var s=e.getAttachment();s instanceof th&&this.sortPathConstraintAttachmentWith(s,n);for(var o=t.bones,h=o.length,a=0;a<h;a++)this.sortBone(o[a]);this._updateCache.push(t);for(var a=0;a<h;a++)this.sortReset(o[a].children);for(var a=0;a<h;a++)o[a].sorted=!0}},t.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&L.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,r=e.length;if(t.data.local)for(var n=0;n<r;n++){var a=e[n];this.sortBone(a.parent),this.sortBone(a)}else for(var n=0;n<r;n++)this.sortBone(e[n]);this._updateCache.push(t);for(var n=0;n<r;n++)this.sortReset(e[n].children);for(var n=0;n<r;n++)e[n].sorted=!0}},t.prototype.sortPathConstraintAttachment=function(t,e,r){var n=t.attachments[e];if(n)for(var a in n)this.sortPathConstraintAttachmentWith(n[a],r)},t.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof th){var r=t.bones;if(r)for(var n=this.bones,a=0,i=r.length;a<i;){var s=r[a++];for(s+=a;a<s;)this.sortBone(n[r[a++]])}else this.sortBone(e)}},t.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},t.prototype.sortReset=function(t){for(var e=0,r=t.length;e<r;e++){var n=t[e];n.active&&(n.sorted&&this.sortReset(n.children),n.sorted=!1)}},t.prototype.updateWorldTransform=function(){for(var t=this.bones,e=0,r=t.length;e<r;e++){var n=t[e];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY}for(var a=this._updateCache,e=0,r=a.length;e<r;e++)a[e].update()},t.prototype.updateWorldTransformWith=function(t){var e=this.getRootBone(),r=t.matrix.a,n=t.matrix.c,a=t.matrix.b,i=t.matrix.d;e.matrix.tx=r*this.x+n*this.y+t.worldX,e.matrix.ty=a*this.x+i*this.y+t.worldY;var s=e.rotation+90+e.shearY,o=X.cosDeg(e.rotation+e.shearX)*e.scaleX,h=X.cosDeg(s)*e.scaleY,l=X.sinDeg(e.rotation+e.shearX)*e.scaleX,c=X.sinDeg(s)*e.scaleY,u=this.scaleX,d=q.yDown?-this.scaleY:this.scaleY;e.matrix.a=(r*o+n*l)*u,e.matrix.c=(r*h+n*c)*u,e.matrix.b=(a*o+i*l)*d,e.matrix.d=(a*h+i*c)*d;for(var f=this._updateCache,p=0,m=f.length;p<m;p++){var $=f[p];$!=e&&$.update()}},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,r=t.length;e<r;e++)t[e].setToSetupPose();for(var n=this.ikConstraints,e=0,r=n.length;e<r;e++){var a=n[e];a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}for(var i=this.transformConstraints,e=0,r=i.length;e<r;e++){var a=i[e],s=a.data;a.mixRotate=s.mixRotate,a.mixX=s.mixX,a.mixY=s.mixY,a.mixScaleX=s.mixScaleX,a.mixScaleY=s.mixScaleY,a.mixShearY=s.mixShearY}for(var o=this.pathConstraints,e=0,r=o.length;e<r;e++){var a=o[e],s=a.data;a.position=s.position,a.spacing=s.spacing,a.mixRotate=s.mixRotate,a.mixX=s.mixX,a.mixY=s.mixY}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;L.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,r=t.length;e<r;e++)t[e].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(t){if(!t)throw Error("boneName cannot be null.");for(var e=this.bones,r=0,n=e.length;r<n;r++){var a=e[r];if(a.data.name==t)return a}return null},t.prototype.findBoneIndex=function(t){if(!t)throw Error("boneName cannot be null.");for(var e=this.bones,r=0,n=e.length;r<n;r++)if(e[r].data.name==t)return r;return -1},t.prototype.findSlot=function(t){if(!t)throw Error("slotName cannot be null.");for(var e=this.slots,r=0,n=e.length;r<n;r++){var a=e[r];if(a.data.name==t)return a}return null},t.prototype.findSlotIndex=function(t){if(!t)throw Error("slotName cannot be null.");for(var e=this.slots,r=0,n=e.length;r<n;r++)if(e[r].data.name==t)return r;return -1},t.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(!e)throw Error("Skin not found: "+t);this.setSkin(e)},t.prototype.setSkin=function(t){if(t!=this.skin){if(t){if(this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,r=0,n=e.length;r<n;r++){var a=e[r],i=a.data.attachmentName;if(i){var s=t.getAttachment(r,i);s&&a.setAttachment(s)}}}this.skin=t,this.updateCache()}},t.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlot(t).index,e)},t.prototype.getAttachment=function(t,e){if(!e)throw Error("attachmentName cannot be null.");if(this.skin){var r=this.skin.getAttachment(t,e);if(r)return r}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},t.prototype.setAttachment=function(t,e){if(!t)throw Error("slotName cannot be null.");for(var r=this.slots,n=0,a=r.length;n<a;n++){var i=r[n];if(i.data.name==t){var s=null;if(e&&!(s=this.getAttachment(n,e)))throw Error("Attachment not found: "+e+", for slot: "+t);i.setAttachment(s);return}}throw Error("Slot not found: "+t)},t.prototype.findIkConstraint=function(t){if(!t)throw Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,n=e.length;r<n;r++){var a=e[r];if(a.data.name==t)return a}return null},t.prototype.findTransformConstraint=function(t){if(!t)throw Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,n=e.length;r<n;r++){var a=e[r];if(a.data.name==t)return a}return null},t.prototype.findPathConstraint=function(t){if(!t)throw Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,n=e.length;r<n;r++){var a=e[r];if(a.data.name==t)return a}return null},t.prototype.getBoundsRect=function(){var t=new N,e=new N;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}},t.prototype.getBounds=function(t,e,r){if(void 0===r&&(r=[,,]),!t)throw Error("offset cannot be null.");if(!e)throw Error("size cannot be null.");for(var n=this.drawOrder,a=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,h=0,l=n.length;h<l;h++){var c=n[h];if(c.bone.active){var u=0,d=null,f=c.getAttachment();if(f instanceof tu)u=8,d=L.setArraySize(r,u,0),f.computeWorldVertices(c.bone,d,0,2);else if(f instanceof to){var p=f;u=p.worldVerticesLength,d=L.setArraySize(r,u,0),p.computeWorldVertices(c,0,u,d,0,2)}if(d)for(var m=0,$=d.length;m<$;m+=2){var g=d[m],v=d[m+1];a=Math.min(a,g),i=Math.min(i,v),s=Math.max(s,g),o=Math.max(o,v)}}}t.set(a,i),e.set(s-a,o-i)},t.prototype.update=function(t){this.time+=t},Object.defineProperty(t.prototype,"flipX",{get:function(){return -1==this.scaleX},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return -1==this.scaleY},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),es=function(){function t(){this.name=null,this.bones=[],this.slots=[],this.skins=[],this.defaultSkin=null,this.events=[],this.animations=[],this.ikConstraints=[],this.transformConstraints=[],this.pathConstraints=[],this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}return t.prototype.findBone=function(t){if(!t)throw Error("boneName cannot be null.");for(var e=this.bones,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findBoneIndex=function(t){if(!t)throw Error("boneName cannot be null.");for(var e=this.bones,r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return -1},t.prototype.findSlot=function(t){if(!t)throw Error("slotName cannot be null.");for(var e=this.slots,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findSlotIndex=function(t){if(!t)throw Error("slotName cannot be null.");for(var e=this.slots,r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return -1},t.prototype.findSkin=function(t){if(!t)throw Error("skinName cannot be null.");for(var e=this.skins,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findEvent=function(t){if(!t)throw Error("eventDataName cannot be null.");for(var e=this.events,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findAnimation=function(t){if(!t)throw Error("animationName cannot be null.");for(var e=this.animations,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findIkConstraint=function(t){if(!t)throw Error("constraintName cannot be null.");for(var e=this.ikConstraints,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findTransformConstraint=function(t){if(!t)throw Error("constraintName cannot be null.");for(var e=this.transformConstraints,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findPathConstraint=function(t){if(!t)throw Error("constraintName cannot be null.");for(var e=this.pathConstraints,r=0,n=e.length;r<n;r++){var a=e[r];if(a.name==t)return a}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return -1},t}(),eo=function t(e,r,n){if(this.color=new F(1,1,1,1),e<0)throw Error("index must be >= 0.");if(!r)throw Error("name cannot be null.");if(!n)throw Error("boneData cannot be null.");this.index=e,this.name=r,this.boneData=n},eh=function(t){function e(e){var r=t.call(this,e,0,!1)||this;return r.bones=[],r.mixRotate=0,r.mixX=0,r.mixY=0,r.mixScaleX=0,r.mixScaleY=0,r.mixShearY=0,r.offsetRotation=0,r.offsetX=0,r.offsetY=0,r.offsetScaleX=0,r.offsetScaleY=0,r.offsetShearY=0,r.relative=!1,r.local=!1,r}return te(e,t),e}(tQ),el=function t(e,r,n){this.slotIndex=e,this.name=r,this.attachment=n},ec=function(){function t(t){if(this.attachments=[],this.bones=[],this.constraints=[],!t)throw Error("name cannot be null.");this.name=t}return t.prototype.setAttachment=function(t,e,r){if(!r)throw Error("attachment cannot be null.");var n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=r},t.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var r=t.bones[e],n=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==r){n=!0;break}n||this.bones.push(r)}for(var e=0;e<t.constraints.length;e++){for(var i=t.constraints[e],n=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==i){n=!0;break}n||this.constraints.push(i)}for(var s=t.getAttachments(),e=0;e<s.length;e++){var o=s[e];this.setAttachment(o.slotIndex,o.name,o.attachment)}},t.prototype.copySkin=function(t){for(var e=0;e<t.bones.length;e++){for(var r=t.bones[e],n=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==r){n=!0;break}n||this.bones.push(r)}for(var e=0;e<t.constraints.length;e++){for(var i=t.constraints[e],n=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==i){n=!0;break}n||this.constraints.push(i)}for(var s=t.getAttachments(),e=0;e<s.length;e++){var o=s[e];o.attachment&&(o.attachment instanceof to?(o.attachment=o.attachment.newLinkedMesh(),this.setAttachment(o.slotIndex,o.name,o.attachment)):(o.attachment=o.attachment.copy(),this.setAttachment(o.slotIndex,o.name,o.attachment)))}},t.prototype.getAttachment=function(t,e){var r=this.attachments[t];return r?r[e]:null},t.prototype.removeAttachment=function(t,e){var r=this.attachments[t];r&&(r[e]=null)},t.prototype.getAttachments=function(){for(var t=[],e=0;e<this.attachments.length;e++){var r=this.attachments[e];if(r)for(var n in r){var a=r[n];a&&t.push(new el(e,n,a))}}return t},t.prototype.getAttachmentsForSlot=function(t,e){var r=this.attachments[t];if(r)for(var n in r){var a=r[n];a&&e.push(new el(t,n,a))}},t.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},t.prototype.attachAll=function(t,e){for(var r=0,n=0;n<t.slots.length;n++){var a=t.slots[n],i=a.getAttachment();if(i&&r<e.attachments.length){var s=e.attachments[r];for(var o in s)if(i==s[o]){var h=this.getAttachment(r,o);h&&a.setAttachment(h);break}}r++}},t}(),eu=function(){function e(t){this.scale=1,this.attachmentLoader=null,this.linkedMeshes=[],this.attachmentLoader=t}return e.prototype.readSkeletonData=function(r){var n=this.scale,a=new es;a.name="";var i=new $(r),s=i.readInt32(),o=i.readInt32();if(a.hash=0==o&&0==s?null:o.toString(16)+s.toString(16),a.version=i.readString(),"4.0"!==a.version.substr(0,3)){var h="Spine 4.0 loader cant load version "+a.version+". Please configure your pixi-spine bundle";console.error(h)}a.x=i.readFloat(),a.y=i.readFloat(),a.width=i.readFloat(),a.height=i.readFloat();var l=i.readBoolean();l&&(a.fps=i.readFloat(),a.imagesPath=i.readString(),a.audioPath=i.readString());var c=0;c=i.readInt(!0);for(var u=0;u<c;u++)i.strings.push(i.readString());c=i.readInt(!0);for(var u=0;u<c;u++){var d=i.readString(),f=0==u?null:a.bones[i.readInt(!0)],p=new tK(u,d,f);p.rotation=i.readFloat(),p.x=i.readFloat()*n,p.y=i.readFloat()*n,p.scaleX=i.readFloat(),p.scaleY=i.readFloat(),p.shearX=i.readFloat(),p.shearY=i.readFloat(),p.length=i.readFloat()*n,p.transformMode=i.readInt(!0),p.skinRequired=i.readBoolean(),l&&F.rgba8888ToColor(p.color,i.readInt32()),a.bones.push(p)}c=i.readInt(!0);for(var u=0;u<c;u++){var m=i.readString(),g=a.bones[i.readInt(!0)],p=new eo(u,m,g);F.rgba8888ToColor(p.color,i.readInt32());var v=i.readInt32();-1!=v&&F.rgb888ToColor(p.darkColor=new F,v),p.attachmentName=i.readStringRef(),p.blendMode=e.BlendModeValues[i.readInt(!0)],a.slots.push(p)}c=i.readInt(!0);for(var u=0,x=void 0;u<c;u++){var p=new ee(i.readString());p.order=i.readInt(!0),p.skinRequired=i.readBoolean(),x=i.readInt(!0);for(var y=0;y<x;y++)p.bones.push(a.bones[i.readInt(!0)]);p.target=a.bones[i.readInt(!0)],p.mix=i.readFloat(),p.softness=i.readFloat()*n,p.bendDirection=i.readByte(),p.compress=i.readBoolean(),p.stretch=i.readBoolean(),p.uniform=i.readBoolean(),a.ikConstraints.push(p)}c=i.readInt(!0);for(var u=0,x=void 0;u<c;u++){var p=new eh(i.readString());p.order=i.readInt(!0),p.skinRequired=i.readBoolean(),x=i.readInt(!0);for(var y=0;y<x;y++)p.bones.push(a.bones[i.readInt(!0)]);p.target=a.bones[i.readInt(!0)],p.local=i.readBoolean(),p.relative=i.readBoolean(),p.offsetRotation=i.readFloat(),p.offsetX=i.readFloat()*n,p.offsetY=i.readFloat()*n,p.offsetScaleX=i.readFloat(),p.offsetScaleY=i.readFloat(),p.offsetShearY=i.readFloat(),p.mixRotate=i.readFloat(),p.mixX=i.readFloat(),p.mixY=i.readFloat(),p.mixScaleX=i.readFloat(),p.mixScaleY=i.readFloat(),p.mixShearY=i.readFloat(),a.transformConstraints.push(p)}c=i.readInt(!0);for(var u=0,x=void 0;u<c;u++){var p=new er(i.readString());p.order=i.readInt(!0),p.skinRequired=i.readBoolean(),x=i.readInt(!0);for(var y=0;y<x;y++)p.bones.push(a.bones[i.readInt(!0)]);p.target=a.slots[i.readInt(!0)],p.positionMode=i.readInt(!0),p.spacingMode=i.readInt(!0),p.rotateMode=i.readInt(!0),p.offsetRotation=i.readFloat(),p.position=i.readFloat(),p.positionMode==t.PositionMode.Fixed&&(p.position*=n),p.spacing=i.readFloat(),(p.spacingMode==t.SpacingMode.Length||p.spacingMode==t.SpacingMode.Fixed)&&(p.spacing*=n),p.mixRotate=i.readFloat(),p.mixX=i.readFloat(),p.mixY=i.readFloat(),a.pathConstraints.push(p)}var b=this.readSkin(i,a,!0,l);b&&(a.defaultSkin=b,a.skins.push(b));var u=a.skins.length;for(L.setArraySize(a.skins,c=u+i.readInt(!0));u<c;u++)a.skins[u]=this.readSkin(i,a,!1,l);c=this.linkedMeshes.length;for(var u=0;u<c;u++){var _=this.linkedMeshes[u],w=(_.skin?a.findSkin(_.skin):a.defaultSkin).getAttachment(_.slotIndex,_.parent);_.mesh.deformAttachment=_.inheritDeform?w:_.mesh,_.mesh.setParentMesh(w)}this.linkedMeshes.length=0,c=i.readInt(!0);for(var u=0;u<c;u++){var p=new t9(i.readStringRef());p.intValue=i.readInt(!1),p.floatValue=i.readFloat(),p.stringValue=i.readString(),p.audioPath=i.readString(),p.audioPath&&(p.volume=i.readFloat(),p.balance=i.readFloat()),a.events.push(p)}c=i.readInt(!0);for(var u=0;u<c;u++)a.animations.push(this.readAnimation(i,i.readString(),a));return a},e.prototype.readSkin=function(t,e,r,n){var a=null,i=0;if(r){if(0==(i=t.readInt(!0)))return null;a=new ec("default")}else{(a=new ec(t.readStringRef())).bones.length=t.readInt(!0);for(var s=0,o=a.bones.length;s<o;s++)a.bones[s]=e.bones[t.readInt(!0)];for(var s=0,o=t.readInt(!0);s<o;s++)a.constraints.push(e.ikConstraints[t.readInt(!0)]);for(var s=0,o=t.readInt(!0);s<o;s++)a.constraints.push(e.transformConstraints[t.readInt(!0)]);for(var s=0,o=t.readInt(!0);s<o;s++)a.constraints.push(e.pathConstraints[t.readInt(!0)]);i=t.readInt(!0)}for(var s=0;s<i;s++)for(var h=t.readInt(!0),l=0,c=t.readInt(!0);l<c;l++){var u=t.readStringRef(),d=this.readAttachment(t,e,a,h,u,n);d&&a.setAttachment(h,u,d)}return a},e.prototype.readAttachment=function(e,r,n,a,i,s){var o=this.scale,h=e.readStringRef();switch(h||(h=i),e.readByte()){case t.AttachmentType.Region:var l=e.readStringRef(),c=e.readFloat(),u=e.readFloat(),d=e.readFloat(),f=e.readFloat(),p=e.readFloat(),m=e.readFloat(),$=e.readFloat(),g=e.readInt32();l||(l=h);var v=this.attachmentLoader.newRegionAttachment(n,h,l);if(!v)break;return v.path=l,v.x=u*o,v.y=d*o,v.scaleX=f,v.scaleY=p,v.rotation=c,v.width=m*o,v.height=$*o,F.rgba8888ToColor(v.color,g),v;case t.AttachmentType.BoundingBox:var x=e.readInt(!0),y=this.readVertices(e,x),g=s?e.readInt32():0,b=this.attachmentLoader.newBoundingBoxAttachment(n,h);if(!b)break;return b.worldVerticesLength=x<<1,b.vertices=y.vertices,b.bones=y.bones,s&&F.rgba8888ToColor(b.color,g),b;case t.AttachmentType.Mesh:var l=e.readStringRef(),g=e.readInt32(),x=e.readInt(!0),_=this.readFloatArray(e,x<<1,1),w=this.readShortArray(e),y=this.readVertices(e,x),k=e.readInt(!0),S=null,m=0,$=0;s&&(S=this.readShortArray(e),m=e.readFloat(),$=e.readFloat()),l||(l=h);var M=this.attachmentLoader.newMeshAttachment(n,h,l);if(!M)break;return M.path=l,F.rgba8888ToColor(M.color,g),M.bones=y.bones,M.vertices=y.vertices,M.worldVerticesLength=x<<1,M.triangles=w,M.regionUVs=new Float32Array(_),M.hullLength=k<<1,s&&(M.edges=S,M.width=m*o,M.height=$*o),M;case t.AttachmentType.LinkedMesh:var l=e.readStringRef(),g=e.readInt32(),T=e.readStringRef(),B=e.readStringRef(),C=e.readBoolean(),m=0,$=0;s&&(m=e.readFloat(),$=e.readFloat()),l||(l=h);var M=this.attachmentLoader.newMeshAttachment(n,h,l);if(!M)break;return M.path=l,F.rgba8888ToColor(M.color,g),s&&(M.width=m*o,M.height=$*o),this.linkedMeshes.push(new ed(M,T,a,B,C)),M;case t.AttachmentType.Path:for(var I=e.readBoolean(),A=e.readBoolean(),x=e.readInt(!0),y=this.readVertices(e,x),Y=L.newArray(x/3,0),X=0,P=Y.length;X<P;X++)Y[X]=e.readFloat()*o;var g=s?e.readInt32():0,l=this.attachmentLoader.newPathAttachment(n,h);if(!l)break;return l.closed=I,l.constantSpeed=A,l.worldVerticesLength=x<<1,l.vertices=y.vertices,l.bones=y.bones,l.lengths=Y,s&&F.rgba8888ToColor(l.color,g),l;case t.AttachmentType.Point:var c=e.readFloat(),u=e.readFloat(),d=e.readFloat(),g=s?e.readInt32():0,R=this.attachmentLoader.newPointAttachment(n,h);if(!R)break;return R.x=u*o,R.y=d*o,R.rotation=c,s&&F.rgba8888ToColor(R.color,g),R;case t.AttachmentType.Clipping:var D=e.readInt(!0),x=e.readInt(!0),y=this.readVertices(e,x),g=s?e.readInt32():0,E=this.attachmentLoader.newClippingAttachment(n,h);if(!E)break;return E.endSlot=r.slots[D],E.worldVerticesLength=x<<1,E.vertices=y.vertices,E.bones=y.bones,s&&F.rgba8888ToColor(E.color,g),E}return null},e.prototype.readVertices=function(t,e){var r=this.scale,n=new ef;if(!t.readBoolean())return n.vertices=this.readFloatArray(t,e<<1,r),n;for(var a=[],i=[],s=0;s<e;s++){var o=t.readInt(!0);i.push(o);for(var h=0;h<o;h++)i.push(t.readInt(!0)),a.push(t.readFloat()*r),a.push(t.readFloat()*r),a.push(t.readFloat())}return n.vertices=L.toFloatArray(a),n.bones=i,n},e.prototype.readFloatArray=function(t,e,r){var n=Array(e);if(1==r)for(var a=0;a<e;a++)n[a]=t.readFloat();else for(var a=0;a<e;a++)n[a]=t.readFloat()*r;return n},e.prototype.readShortArray=function(t){for(var e=t.readInt(!0),r=Array(e),n=0;n<e;n++)r[n]=t.readShort();return r},e.prototype.readAnimation=function(e,r,n){e.readInt(!0);for(var a=[],i=this.scale,s=0,o=e.readInt(!0);s<o;s++)for(var h=e.readInt(!0),l=0,c=e.readInt(!0);l<c;l++){var u=e.readByte(),d=e.readInt(!0),f=d-1;switch(u){case eM:for(var p=new tX(d,h),m=0;m<d;m++)p.setFrame(m,e.readFloat(),e.readStringRef());a.push(p);break;case eT:for(var $=e.readInt(!0),p=new tC(d,$,h),g=e.readFloat(),v=e.readUnsignedByte()/255,x=e.readUnsignedByte()/255,y=e.readUnsignedByte()/255,b=e.readUnsignedByte()/255,m=0,_=0;p.setFrame(m,g,v,x,y,b),m!=f;m++){var w=e.readFloat(),k=e.readUnsignedByte()/255,S=e.readUnsignedByte()/255,M=e.readUnsignedByte()/255,T=e.readUnsignedByte()/255;switch(e.readByte()){case eP:p.setStepped(m);break;case eR:e$(e,p,_++,m,0,g,w,v,k,1),e$(e,p,_++,m,1,g,w,x,S,1),e$(e,p,_++,m,2,g,w,y,M,1),e$(e,p,_++,m,3,g,w,b,T,1)}g=w,v=k,x=S,y=M,b=T}a.push(p);break;case eB:for(var $=e.readInt(!0),p=new tI(d,$,h),g=e.readFloat(),v=e.readUnsignedByte()/255,x=e.readUnsignedByte()/255,y=e.readUnsignedByte()/255,m=0,_=0;p.setFrame(m,g,v,x,y),m!=f;m++){var w=e.readFloat(),k=e.readUnsignedByte()/255,S=e.readUnsignedByte()/255,M=e.readUnsignedByte()/255;switch(e.readByte()){case eP:p.setStepped(m);break;case eR:e$(e,p,_++,m,0,g,w,v,k,1),e$(e,p,_++,m,1,g,w,x,S,1),e$(e,p,_++,m,2,g,w,y,M,1)}g=w,v=k,x=S,y=M}a.push(p);break;case eC:for(var $=e.readInt(!0),p=new tY(d,$,h),g=e.readFloat(),v=e.readUnsignedByte()/255,x=e.readUnsignedByte()/255,y=e.readUnsignedByte()/255,b=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255,S=e.readUnsignedByte()/255,M=e.readUnsignedByte()/255,m=0,_=0;p.setFrame(m,g,v,x,y,b,k,S,M),m!=f;m++){var w=e.readFloat(),B=e.readUnsignedByte()/255,C=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,Y=e.readUnsignedByte()/255,F=e.readUnsignedByte()/255,X=e.readUnsignedByte()/255;switch(e.readByte()){case eP:p.setStepped(m);break;case eR:e$(e,p,_++,m,0,g,w,v,B,1),e$(e,p,_++,m,1,g,w,x,C,1),e$(e,p,_++,m,2,g,w,y,I,1),e$(e,p,_++,m,3,g,w,b,A,1),e$(e,p,_++,m,4,g,w,k,Y,1),e$(e,p,_++,m,5,g,w,S,F,1),e$(e,p,_++,m,6,g,w,M,X,1)}g=w,v=B,x=C,y=I,b=A,k=Y,S=F,M=X}a.push(p);break;case eI:for(var $=e.readInt(!0),p=new tF(d,$,h),g=e.readFloat(),v=e.readUnsignedByte()/255,x=e.readUnsignedByte()/255,y=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255,S=e.readUnsignedByte()/255,M=e.readUnsignedByte()/255,m=0,_=0;p.setFrame(m,g,v,x,y,k,S,M),m!=f;m++){var w=e.readFloat(),B=e.readUnsignedByte()/255,C=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,Y=e.readUnsignedByte()/255,F=e.readUnsignedByte()/255,X=e.readUnsignedByte()/255;switch(e.readByte()){case eP:p.setStepped(m);break;case eR:e$(e,p,_++,m,0,g,w,v,B,1),e$(e,p,_++,m,1,g,w,x,C,1),e$(e,p,_++,m,2,g,w,y,I,1),e$(e,p,_++,m,3,g,w,k,Y,1),e$(e,p,_++,m,4,g,w,S,F,1),e$(e,p,_++,m,5,g,w,M,X,1)}g=w,v=B,x=C,y=I,k=Y,S=F,M=X}a.push(p);break;case eA:for(var p=new tA(d,e.readInt(!0),h),g=e.readFloat(),b=e.readUnsignedByte()/255,m=0,_=0;p.setFrame(m,g,b),m!=f;m++){var w=e.readFloat(),T=e.readUnsignedByte()/255;switch(e.readByte()){case eP:p.setStepped(m);break;case eR:e$(e,p,_++,m,0,g,w,b,T,1)}g=w,b=T}a.push(p)}}for(var s=0,o=e.readInt(!0);s<o;s++)for(var P=e.readInt(!0),l=0,c=e.readInt(!0);l<c;l++){var R=e.readByte(),d=e.readInt(!0),$=e.readInt(!0);switch(R){case eg:a.push(ep(e,new ty(d,$,P),1));break;case ev:a.push(em(e,new tb(d,$,P),i));break;case ex:a.push(ep(e,new t_(d,$,P),i));break;case ey:a.push(ep(e,new tw(d,$,P),i));break;case eb:a.push(em(e,new tk(d,$,P),1));break;case e_:a.push(ep(e,new tS(d,$,P),1));break;case ew:a.push(ep(e,new t0(d,$,P),1));break;case ek:a.push(em(e,new tM(d,$,P),1));break;case eS:a.push(ep(e,new tT(d,$,P),1));break;case e0:a.push(ep(e,new tB(d,$,P),1))}}for(var s=0,o=e.readInt(!0);s<o;s++){for(var D=e.readInt(!0),d=e.readInt(!0),f=d-1,p=new t1(d,e.readInt(!0),D),g=e.readFloat(),E=e.readFloat(),V=e.readFloat()*i,m=0,_=0;p.setFrame(m,g,E,V,e.readByte(),e.readBoolean(),e.readBoolean()),m!=f;m++){var w=e.readFloat(),N=e.readFloat(),O=e.readFloat()*i;switch(e.readByte()){case eP:p.setStepped(m);break;case eR:e$(e,p,_++,m,0,g,w,E,N,1),e$(e,p,_++,m,1,g,w,V,O,i)}g=w,E=N,V=O}a.push(p)}for(var s=0,o=e.readInt(!0);s<o;s++){for(var D=e.readInt(!0),d=e.readInt(!0),f=d-1,p=new tL(d,e.readInt(!0),D),g=e.readFloat(),W=e.readFloat(),U=e.readFloat(),q=e.readFloat(),z=e.readFloat(),G=e.readFloat(),H=e.readFloat(),m=0,_=0;p.setFrame(m,g,W,U,q,z,G,H),m!=f;m++){var w=e.readFloat(),j=e.readFloat(),J=e.readFloat(),K=e.readFloat(),Q=e.readFloat(),Z=e.readFloat(),tt=e.readFloat();switch(e.readByte()){case eP:p.setStepped(m);break;case eR:e$(e,p,_++,m,0,g,w,W,j,1),e$(e,p,_++,m,1,g,w,U,J,1),e$(e,p,_++,m,2,g,w,q,K,1),e$(e,p,_++,m,3,g,w,z,Q,1),e$(e,p,_++,m,4,g,w,G,Z,1),e$(e,p,_++,m,5,g,w,H,tt,1)}g=w,W=j,U=J,q=K,z=Q,G=Z,H=tt}a.push(p)}for(var s=0,o=e.readInt(!0);s<o;s++)for(var D=e.readInt(!0),te=n.pathConstraints[D],l=0,c=e.readInt(!0);l<c;l++)switch(e.readByte()){case eY:a.push(ep(e,new tE(e.readInt(!0),e.readInt(!0),D),te.positionMode==t.PositionMode.Fixed?i:1));break;case eF:a.push(ep(e,new t3(e.readInt(!0),e.readInt(!0),D),te.spacingMode==t.SpacingMode.Length||te.spacingMode==t.SpacingMode.Fixed?i:1));break;case eX:for(var p=new tV(e.readInt(!0),e.readInt(!0),D),g=e.readFloat(),W=e.readFloat(),U=e.readFloat(),q=e.readFloat(),m=0,_=0,f=p.getFrameCount()-1;p.setFrame(m,g,W,U,q),m!=f;m++){var w=e.readFloat(),j=e.readFloat(),J=e.readFloat(),K=e.readFloat();switch(e.readByte()){case eP:p.setStepped(m);break;case eR:e$(e,p,_++,m,0,g,w,W,j,1),e$(e,p,_++,m,1,g,w,U,J,1),e$(e,p,_++,m,2,g,w,q,K,1)}g=w,W=j,U=J,q=K}a.push(p)}for(var s=0,o=e.readInt(!0);s<o;s++)for(var tr=n.skins[e.readInt(!0)],l=0,c=e.readInt(!0);l<c;l++)for(var h=e.readInt(!0),tn=0,ta=e.readInt(!0);tn<ta;tn++){for(var ti=e.readStringRef(),ts=tr.getAttachment(h,ti),to=ts.bones,th=ts.vertices,tl=to?th.length/3*2:th.length,d=e.readInt(!0),f=d-1,$=e.readInt(!0),p=new tP(d,$,h,ts),g=e.readFloat(),m=0,_=0;;m++){var tc=void 0,tu=e.readInt(!0);if(0==tu)tc=to?L.newFloatArray(tl):th;else{tc=L.newFloatArray(tl);var td=e.readInt(!0);if(tu+=td,1==i)for(var tf=td;tf<tu;tf++)tc[tf]=e.readFloat();else for(var tf=td;tf<tu;tf++)tc[tf]=e.readFloat()*i;if(!to)for(var tf=0,tm=tc.length;tf<tm;tf++)tc[tf]+=th[tf]}if(p.setFrame(m,g,tc),m==f)break;var w=e.readFloat();switch(e.readByte()){case eP:p.setStepped(m);break;case eR:e$(e,p,_++,m,0,g,w,0,1,1)}g=w}a.push(p)}var t$=e.readInt(!0);if(t$>0){for(var p=new tD(t$),tg=n.slots.length,s=0;s<t$;s++){for(var g=e.readFloat(),tv=e.readInt(!0),tx=L.newArray(tg,0),l=tg-1;l>=0;l--)tx[l]=-1;for(var tN=L.newArray(tg-tv,0),tO=0,t4=0,l=0;l<tv;l++){for(var h=e.readInt(!0);tO!=h;)tN[t4++]=tO++;tx[tO+e.readInt(!0)]=tO++}for(;tO<tg;)tN[t4++]=tO++;for(var l=tg-1;l>=0;l--)-1==tx[l]&&(tx[l]=tN[--t4]);p.setFrame(s,g,tx)}a.push(p)}var tW=e.readInt(!0);if(tW>0){for(var p=new tR(tW),s=0;s<tW;s++){var g=e.readFloat(),t6=n.events[e.readInt(!0)],t8=new tZ(g,t6);t8.intValue=e.readInt(!1),t8.floatValue=e.readFloat(),t8.stringValue=e.readBoolean()?e.readString():t6.stringValue,t8.data.audioPath&&(t8.volume=e.readFloat(),t8.balance=e.readFloat()),p.setFrame(s,t8)}a.push(p)}for(var t2=0,s=0,o=a.length;s<o;s++)t2=Math.max(t2,a[s].getDuration());return new tp(r,a,t2)},e.BlendModeValues=[n.BLEND_MODES.NORMAL,n.BLEND_MODES.ADD,n.BLEND_MODES.MULTIPLY,n.BLEND_MODES.SCREEN],e}(),ed=function t(e,r,n,a,i){this.mesh=e,this.skin=r,this.slotIndex=n,this.parent=a,this.inheritDeform=i},ef=function t(e,r){void 0===e&&(e=null),void 0===r&&(r=null),this.bones=e,this.vertices=r};function ep(t,e,r){for(var n=t.readFloat(),a=t.readFloat()*r,i=0,s=0,o=e.getFrameCount()-1;e.setFrame(i,n,a),i!=o;i++){var h=t.readFloat(),l=t.readFloat()*r;switch(t.readByte()){case eP:e.setStepped(i);break;case eR:e$(t,e,s++,i,0,n,h,a,l,r)}n=h,a=l}return e}function em(t,e,r){for(var n=t.readFloat(),a=t.readFloat()*r,i=t.readFloat()*r,s=0,o=0,h=e.getFrameCount()-1;e.setFrame(s,n,a,i),s!=h;s++){var l=t.readFloat(),c=t.readFloat()*r,u=t.readFloat()*r;switch(t.readByte()){case eP:e.setStepped(s);break;case eR:e$(t,e,o++,s,0,n,l,a,c,r),e$(t,e,o++,s,1,n,l,i,u,r)}n=l,a=c,i=u}return e}function e$(t,e,r,n,a,i,s,o,h,l){e.setBezier(r,n,a,i,o,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,s,h)}var eg=0,ev=1,ex=2,ey=3,eb=4,e_=5,ew=6,ek=7,eS=8,e0=9,eM=0,eT=1,eB=2,eC=3,eI=4,eA=5,eY=0,eF=1,eX=2,eP=1,eR=2,eD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return te(e,t),e}(U),e1=function(){function e(t){this.attachmentLoader=null,this.scale=1,this.linkedMeshes=[],this.attachmentLoader=t}return e.prototype.readSkeletonData=function(r){var n=this.scale,a=new es,i="string"==typeof r?JSON.parse(r):r,s=i.skeleton;if(s){if(a.hash=s.hash,a.version=s.spine,"4.0"!==a.version.substr(0,3)){var o="Spine 4.0 loader cant load version "+s.spine+". Please configure your pixi-spine bundle";console.error(o)}a.x=s.x,a.y=s.y,a.width=s.width,a.height=s.height,a.fps=s.fps,a.imagesPath=s.images}if(i.bones)for(var h=0;h<i.bones.length;h++){var l=i.bones[h],c=null,u=eN(l,"parent",null);if(null!=u&&null==(c=a.findBone(u)))throw Error("Parent bone not found: "+u);var d=new tK(a.bones.length,l.name,c);d.length=eN(l,"length",0)*n,d.x=eN(l,"x",0)*n,d.y=eN(l,"y",0)*n,d.rotation=eN(l,"rotation",0),d.scaleX=eN(l,"scaleX",1),d.scaleY=eN(l,"scaleY",1),d.shearX=eN(l,"shearX",0),d.shearY=eN(l,"shearY",0),d.transformMode=L.enumValue(t.TransformMode,eN(l,"transform","Normal")),d.skinRequired=eN(l,"skin",!1);var f=eN(l,"color",null);f&&d.color.setFromString(f),a.bones.push(d)}if(i.slots)for(var h=0;h<i.slots.length;h++){var p=i.slots[h],m=a.findBone(p.bone),d=new eo(a.slots.length,p.name,m),f=eN(p,"color",null);f&&d.color.setFromString(f);var $=eN(p,"dark",null);$&&(d.darkColor=F.fromString($)),d.attachmentName=eN(p,"attachment",null),d.blendMode=e.blendModeFromString(eN(p,"blend","normal")),a.slots.push(d)}if(i.ik)for(var h=0;h<i.ik.length;h++){var g=i.ik[h],d=new ee(g.name);d.order=eN(g,"order",0),d.skinRequired=eN(g,"skin",!1);for(var v=0;v<g.bones.length;v++){var x=g.bones[v],y=a.findBone(x);if(null==y)throw Error("IK bone not found: "+x);d.bones.push(y)}d.target=a.findBone(g.target),d.mix=eN(g,"mix",1),d.softness=eN(g,"softness",0)*n,d.bendDirection=eN(g,"bendPositive",!0)?1:-1,d.compress=eN(g,"compress",!1),d.stretch=eN(g,"stretch",!1),d.uniform=eN(g,"uniform",!1),a.ikConstraints.push(d)}if(i.transform)for(var h=0;h<i.transform.length;h++){var g=i.transform[h],d=new eh(g.name);d.order=eN(g,"order",0),d.skinRequired=eN(g,"skin",!1);for(var v=0;v<g.bones.length;v++){var x=g.bones[v],y=a.findBone(x);if(null==y)throw Error("Transform constraint bone not found: "+x);d.bones.push(y)}var b=g.target;if(d.target=a.findBone(b),null==d.target)throw Error("Transform constraint target bone not found: "+b);d.local=eN(g,"local",!1),d.relative=eN(g,"relative",!1),d.offsetRotation=eN(g,"rotation",0),d.offsetX=eN(g,"x",0)*n,d.offsetY=eN(g,"y",0)*n,d.offsetScaleX=eN(g,"scaleX",0),d.offsetScaleY=eN(g,"scaleY",0),d.offsetShearY=eN(g,"shearY",0),d.mixRotate=eN(g,"mixRotate",1),d.mixX=eN(g,"mixX",1),d.mixY=eN(g,"mixY",d.mixX),d.mixScaleX=eN(g,"mixScaleX",1),d.mixScaleY=eN(g,"mixScaleY",d.mixScaleX),d.mixShearY=eN(g,"mixShearY",1),a.transformConstraints.push(d)}if(i.path)for(var h=0;h<i.path.length;h++){var g=i.path[h],d=new er(g.name);d.order=eN(g,"order",0),d.skinRequired=eN(g,"skin",!1);for(var v=0;v<g.bones.length;v++){var x=g.bones[v],y=a.findBone(x);if(null==y)throw Error("Transform constraint bone not found: "+x);d.bones.push(y)}var b=g.target;if(d.target=a.findSlot(b),null==d.target)throw Error("Path target slot not found: "+b);d.positionMode=L.enumValue(t.PositionMode,eN(g,"positionMode","Percent")),d.spacingMode=L.enumValue(t.SpacingMode,eN(g,"spacingMode","Length")),d.rotateMode=L.enumValue(t.RotateMode,eN(g,"rotateMode","Tangent")),d.offsetRotation=eN(g,"rotation",0),d.position=eN(g,"position",0),d.positionMode==t.PositionMode.Fixed&&(d.position*=n),d.spacing=eN(g,"spacing",0),(d.spacingMode==t.SpacingMode.Length||d.spacingMode==t.SpacingMode.Fixed)&&(d.spacing*=n),d.mixRotate=eN(g,"mixRotate",1),d.mixX=eN(g,"mixX",1),d.mixY=eN(g,"mixY",d.mixX),a.pathConstraints.push(d)}if(i.skins)for(var h=0;h<i.skins.length;h++){var _=i.skins[h],w=new ec(_.name);if(_.bones)for(var v=0;v<_.bones.length;v++){var y=a.findBone(_.bones[v]);if(null==y)throw Error("Skin bone not found: "+_.bones[h]);w.bones.push(y)}if(_.ik)for(var v=0;v<_.ik.length;v++){var k=a.findIkConstraint(_.ik[v]);if(null==k)throw Error("Skin IK constraint not found: "+_.ik[h]);w.constraints.push(k)}if(_.transform)for(var v=0;v<_.transform.length;v++){var k=a.findTransformConstraint(_.transform[v]);if(null==k)throw Error("Skin transform constraint not found: "+_.transform[h]);w.constraints.push(k)}if(_.path)for(var v=0;v<_.path.length;v++){var k=a.findPathConstraint(_.path[v]);if(null==k)throw Error("Skin path constraint not found: "+_.path[h]);w.constraints.push(k)}for(var S in _.attachments){var M=a.findSlot(S);if(null==M)throw Error("Slot not found: "+S);var p=_.attachments[S];for(var T in p){var B=this.readAttachment(p[T],w,M.index,T,a);B&&w.setAttachment(M.index,T,B)}}a.skins.push(w),"default"==w.name&&(a.defaultSkin=w)}for(var h=0,C=this.linkedMeshes.length;h<C;h++){var I=this.linkedMeshes[h],w=I.skin?a.findSkin(I.skin):a.defaultSkin,A=w.getAttachment(I.slotIndex,I.parent);I.mesh.deformAttachment=I.inheritDeform?A:I.mesh,I.mesh.setParentMesh(A)}if(this.linkedMeshes.length=0,i.events)for(var Y in i.events){var X=i.events[Y],d=new t9(Y);d.intValue=eN(X,"int",0),d.floatValue=eN(X,"float",0),d.stringValue=eN(X,"string",""),d.audioPath=eN(X,"audio",null),d.audioPath&&(d.volume=eN(X,"volume",1),d.balance=eN(X,"balance",0)),a.events.push(d)}if(i.animations)for(var P in i.animations){var R=i.animations[P];this.readAnimation(R,P,a)}return a},e.prototype.readAttachment=function(t,e,r,n,a){var i=this.scale;switch(n=eN(t,"name",n),eN(t,"type","region")){case"region":var s=eN(t,"path",n),o=this.attachmentLoader.newRegionAttachment(e,n,s);if(!o)break;o.path=s,o.x=eN(t,"x",0)*i,o.y=eN(t,"y",0)*i,o.scaleX=eN(t,"scaleX",1),o.scaleY=eN(t,"scaleY",1),o.rotation=eN(t,"rotation",0),o.width=t.width*i,o.height=t.height*i;var h=eN(t,"color",null);return h&&o.color.setFromString(h),o;case"boundingbox":var l=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(!l)break;this.readVertices(t,l,t.vertexCount<<1);var h=eN(t,"color",null);return h&&l.color.setFromString(h),l;case"mesh":case"linkedmesh":var s=eN(t,"path",n),c=this.attachmentLoader.newMeshAttachment(e,n,s);if(!c)break;c.path=s;var h=eN(t,"color",null);h&&c.color.setFromString(h),c.width=eN(t,"width",0)*i,c.height=eN(t,"height",0)*i;var u=eN(t,"parent",null);if(u)return this.linkedMeshes.push(new eL(c,eN(t,"skin",null),r,u,eN(t,"deform",!0))),c;var d=t.uvs;return this.readVertices(t,c,d.length),c.triangles=t.triangles,c.regionUVs=new Float32Array(d),c.edges=eN(t,"edges",null),c.hullLength=2*eN(t,"hull",0),c;case"path":var s=this.attachmentLoader.newPathAttachment(e,n);if(!s)break;s.closed=eN(t,"closed",!1),s.constantSpeed=eN(t,"constantSpeed",!0);var f=t.vertexCount;this.readVertices(t,s,f<<1);for(var p=L.newArray(f/3,0),m=0;m<t.lengths.length;m++)p[m]=t.lengths[m]*i;s.lengths=p;var h=eN(t,"color",null);return h&&s.color.setFromString(h),s;case"point":var $=this.attachmentLoader.newPointAttachment(e,n);if(!$)break;$.x=eN(t,"x",0)*i,$.y=eN(t,"y",0)*i,$.rotation=eN(t,"rotation",0);var h=eN(t,"color",null);return h&&$.color.setFromString(h),$;case"clipping":var g=this.attachmentLoader.newClippingAttachment(e,n);if(!g)break;var v=eN(t,"end",null);if(null!=v){var x=a.findSlot(v);if(null==x)throw Error("Clipping end slot not found: "+v);g.endSlot=x}var f=t.vertexCount;this.readVertices(t,g,f<<1);var h=eN(t,"color",null);return h&&g.color.setFromString(h),g}return null},e.prototype.readVertices=function(t,e,r){var n=this.scale;e.worldVerticesLength=r;var a=t.vertices;if(r==a.length){var i=L.toFloatArray(a);if(1!=n)for(var s=0,o=a.length;s<o;s++)i[s]*=n;e.vertices=i;return}for(var h=[],l=[],s=0,o=a.length;s<o;){var c=a[s++];l.push(c);for(var u=s+4*c;s<u;s+=4)l.push(a[s]),h.push(a[s+1]*n),h.push(a[s+2]*n),h.push(a[s+3])}e.bones=l,e.vertices=L.toFloatArray(h)},e.prototype.readAnimation=function(e,r,n){var a=this.scale,i=[];if(e.slots)for(var s in e.slots){var o=e.slots[s],h=n.findSlot(s).index;if(-1==h)throw Error("Slot not found: "+s);for(var l in o){var c=o[l];if(c){var u=c.length;if("attachment"==l){for(var d=new tX(u,h),f=0;f<u;f++){var p=c[f];d.setFrame(f,eN(p,"time",0),p.name)}i.push(d)}else if("rgba"==l){for(var d=new tC(u,u<<2,h),p=c[0],m=eN(p,"time",0),$=F.fromString(p.color),f=0,g=0;;f++){d.setFrame(f,m,$.r,$.g,$.b,$.a);var v=c[f+1];if(!v){d.shrink(g);break}var x=eN(v,"time",0),y=F.fromString(v.color),b=p.curve;b&&(g=eV(b,d,g,f,0,m,x,$.r,y.r,1),g=eV(b,d,g,f,1,m,x,$.g,y.g,1),g=eV(b,d,g,f,2,m,x,$.b,y.b,1),g=eV(b,d,g,f,3,m,x,$.a,y.a,1)),m=x,$=y,p=v}i.push(d)}else if("rgb"==l){for(var d=new tI(u,3*u,h),p=c[0],m=eN(p,"time",0),$=F.fromString(p.color),f=0,g=0;;f++){d.setFrame(f,m,$.r,$.g,$.b);var v=c[f+1];if(!v){d.shrink(g);break}var x=eN(v,"time",0),y=F.fromString(v.color),b=p.curve;b&&(g=eV(b,d,g,f,0,m,x,$.r,y.r,1),g=eV(b,d,g,f,1,m,x,$.g,y.g,1),g=eV(b,d,g,f,2,m,x,$.b,y.b,1)),m=x,$=y,p=v}i.push(d)}else if("alpha"==l)i.push(eE(c,new tA(u,u,h),0,1));else if("rgba2"==l){for(var d=new tY(u,7*u,h),p=c[0],m=eN(p,"time",0),$=F.fromString(p.light),_=F.fromString(p.dark),f=0,g=0;;f++){d.setFrame(f,m,$.r,$.g,$.b,$.a,_.r,_.g,_.b);var v=c[f+1];if(!v){d.shrink(g);break}var x=eN(v,"time",0),y=F.fromString(v.light),w=F.fromString(v.dark),b=p.curve;b&&(g=eV(b,d,g,f,0,m,x,$.r,y.r,1),g=eV(b,d,g,f,1,m,x,$.g,y.g,1),g=eV(b,d,g,f,2,m,x,$.b,y.b,1),g=eV(b,d,g,f,3,m,x,$.a,y.a,1),g=eV(b,d,g,f,4,m,x,_.r,w.r,1),g=eV(b,d,g,f,5,m,x,_.g,w.g,1),g=eV(b,d,g,f,6,m,x,_.b,w.b,1)),m=x,$=y,_=w,p=v}i.push(d)}else if("rgb2"==l){for(var d=new tF(u,6*u,h),p=c[0],m=eN(p,"time",0),$=F.fromString(p.light),_=F.fromString(p.dark),f=0,g=0;;f++){d.setFrame(f,m,$.r,$.g,$.b,_.r,_.g,_.b);var v=c[f+1];if(!v){d.shrink(g);break}var x=eN(v,"time",0),y=F.fromString(v.light),w=F.fromString(v.dark),b=p.curve;b&&(g=eV(b,d,g,f,0,m,x,$.r,y.r,1),g=eV(b,d,g,f,1,m,x,$.g,y.g,1),g=eV(b,d,g,f,2,m,x,$.b,y.b,1),g=eV(b,d,g,f,3,m,x,_.r,w.r,1),g=eV(b,d,g,f,4,m,x,_.g,w.g,1),g=eV(b,d,g,f,5,m,x,_.b,w.b,1)),m=x,$=y,_=w,p=v}i.push(d)}else throw Error("Invalid timeline type for a slot: "+l+" ("+s+")")}}}if(e.bones)for(var k in e.bones){var S=e.bones[k],M=n.findBone(k).index;if(-1==M)throw Error("Bone not found: "+k);for(var l in S){var c=S[l],T=c.length;if(0!=T){if("rotate"===l)i.push(eE(c,new ty(T,T,M),0,1));else if("translate"===l){var d=new tb(T,T<<1,M);i.push(e3(c,d,"x","y",0,a))}else if("translatex"===l){var d=new t_(T,T,M);i.push(eE(c,d,0,a))}else if("translatey"===l){var d=new tw(T,T,M);i.push(eE(c,d,0,a))}else if("scale"===l){var d=new tk(T,T<<1,M);i.push(e3(c,d,"x","y",1,1))}else if("scalex"===l){var d=new tS(T,T,M);i.push(eE(c,d,1,1))}else if("scaley"===l){var d=new t0(T,T,M);i.push(eE(c,d,1,1))}else if("shear"===l){var d=new tM(T,T<<1,M);i.push(e3(c,d,"x","y",0,1))}else if("shearx"===l){var d=new tT(T,T,M);i.push(eE(c,d,0,1))}else if("sheary"===l){var d=new tB(T,T,M);i.push(eE(c,d,0,1))}}}}if(e.ik)for(var B in e.ik){var C=e.ik[B],p=C[0];if(p){for(var I=n.findIkConstraint(B),A=n.ikConstraints.indexOf(I),d=new t1(C.length,C.length<<1,A),m=eN(p,"time",0),Y=eN(p,"mix",1),X=eN(p,"softness",0)*a,f=0,g=0;;f++){d.setFrame(f,m,Y,X,eN(p,"bendPositive",!0)?1:-1,eN(p,"compress",!1),eN(p,"stretch",!1));var v=C[f+1];if(!v){d.shrink(g);break}var x=eN(v,"time",0),P=eN(v,"mix",1),R=eN(v,"softness",0)*a,b=p.curve;b&&(g=eV(b,d,g,f,0,m,x,Y,P,1),g=eV(b,d,g,f,1,m,x,X,R,a)),m=x,Y=P,X=R,p=v}i.push(d)}}if(e.transform)for(var B in e.transform){var c=e.transform[B],p=c[0];if(p){for(var I=n.findTransformConstraint(B),A=n.transformConstraints.indexOf(I),d=new tL(c.length,6*c.length,A),m=eN(p,"time",0),D=eN(p,"mixRotate",1),E=eN(p,"mixX",1),V=eN(p,"mixY",E),N=eN(p,"mixScaleX",1),O=eN(p,"mixScaleY",N),W=eN(p,"mixShearY",1),f=0,g=0;;f++){d.setFrame(f,m,D,E,V,N,O,W);var v=c[f+1];if(!v){d.shrink(g);break}var x=eN(v,"time",0),U=eN(v,"mixRotate",1),z=eN(v,"mixX",1),G=eN(v,"mixY",z),H=eN(v,"mixScaleX",1),j=eN(v,"mixScaleY",H),J=eN(v,"mixShearY",1),b=p.curve;b&&(g=eV(b,d,g,f,0,m,x,D,U,1),g=eV(b,d,g,f,1,m,x,E,z,1),g=eV(b,d,g,f,2,m,x,V,G,1),g=eV(b,d,g,f,3,m,x,N,H,1),g=eV(b,d,g,f,4,m,x,O,j,1),g=eV(b,d,g,f,5,m,x,W,J,1)),m=x,D=U,E=z,V=G,N=H,O=j,N=H,p=v}i.push(d)}}if(e.path)for(var B in e.path){var C=e.path[B],A=n.findPathConstraintIndex(B);if(-1==A)throw Error("Path constraint not found: "+B);var I=n.pathConstraints[A];for(var l in C){var c=C[l],p=c[0];if(p){var K=c.length;if("position"===l){var d=new tE(K,K,A);i.push(eE(c,d,0,I.positionMode==t.PositionMode.Fixed?a:1))}else if("spacing"===l){var d=new t3(K,K,A);i.push(eE(c,d,0,I.spacingMode==t.SpacingMode.Length||I.spacingMode==t.SpacingMode.Fixed?a:1))}else if("mix"===l){for(var d=new tV(K,3*K,A),m=eN(p,"time",0),D=eN(p,"mixRotate",1),E=eN(p,"mixX",1),V=eN(p,"mixY",E),f=0,g=0;;f++){d.setFrame(f,m,D,E,V);var v=c[f+1];if(!v){d.shrink(g);break}var x=eN(v,"time",0),U=eN(v,"mixRotate",1),z=eN(v,"mixX",1),G=eN(v,"mixY",z),b=p.curve;b&&(g=eV(b,d,g,f,0,m,x,D,U,1),g=eV(b,d,g,f,1,m,x,E,z,1),g=eV(b,d,g,f,2,m,x,V,G,1)),m=x,D=U,E=z,V=G,p=v}i.push(d)}}}}if(e.deform)for(var Q in e.deform){var Z=e.deform[Q],tt=n.findSkin(Q);if(null==tt){if(!q.FAIL_ON_NON_EXISTING_SKIN)continue;throw Error("Skin not found: "+Q)}for(var s in Z){var o=Z[s],h=n.findSlot(s).index;for(var l in o){var c=o[l],p=c[0];if(p){for(var te=tt.getAttachment(h,l),tr=te.bones,tn=te.vertices,ta=tr?tn.length/3*2:tn.length,d=new tP(c.length,c.length,h,te),m=eN(p,"time",0),f=0,g=0;;f++){var ti=void 0,ts=eN(p,"vertices",null);if(ts){ti=L.newFloatArray(ta);var to=eN(p,"offset",0);if(L.arrayCopy(ts,0,ti,to,ts.length),1!=a)for(var th=to,tl=th+ts.length;th<tl;th++)ti[th]*=a;if(!tr)for(var th=0;th<ta;th++)ti[th]+=tn[th]}else ti=tr?L.newFloatArray(ta):tn;d.setFrame(f,m,ti);var v=c[f+1];if(!v){d.shrink(g);break}var x=eN(v,"time",0),b=p.curve;b&&(g=eV(b,d,g,f,0,m,x,0,1,1)),m=x,p=v}i.push(d)}}}}if(e.drawOrder){for(var d=new tD(e.drawOrder.length),tc=n.slots.length,f=0,th=0;th<e.drawOrder.length;th++,f++){var tu=e.drawOrder[th],td=null,tf=eN(tu,"offsets",null);if(tf){td=L.newArray(tc,-1);for(var tm=L.newArray(tc-tf.length,0),t$=0,tg=0,tv=0;tv<tf.length;tv++){for(var tx=tf[tv],h=n.findSlot(tx.slot).index;t$!=h;)tm[tg++]=t$++;td[t$+tx.offset]=t$++}for(;t$<tc;)tm[tg++]=t$++;for(var tv=tc-1;tv>=0;tv--)-1==td[tv]&&(td[tv]=tm[--tg])}d.setFrame(f,eN(tu,"time",0),td)}i.push(d)}if(e.events){for(var d=new tR(e.events.length),f=0,th=0;th<e.events.length;th++,f++){var tN=e.events[th],tO=n.findEvent(tN.name),t4=new tZ(L.toSinglePrecision(eN(tN,"time",0)),tO);t4.intValue=eN(tN,"int",tO.intValue),t4.floatValue=eN(tN,"float",tO.floatValue),t4.stringValue=eN(tN,"string",tO.stringValue),t4.data.audioPath&&(t4.volume=eN(tN,"volume",1),t4.balance=eN(tN,"balance",0)),d.setFrame(f,t4)}i.push(d)}for(var tW=0,th=0,tl=i.length;th<tl;th++)tW=Math.max(tW,i[th].getDuration());if(isNaN(tW))throw Error("Error while parsing animation, duration is NaN");n.animations.push(new tp(r,i,tW))},e.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return n.BLEND_MODES.NORMAL;if("additive"==t)return n.BLEND_MODES.ADD;if("multiply"==t)return n.BLEND_MODES.MULTIPLY;if("screen"==t)return n.BLEND_MODES.SCREEN;throw Error("Unknown blend mode: "+t)},e}(),eL=function t(e,r,n,a,i){this.mesh=e,this.skin=r,this.slotIndex=n,this.parent=a,this.inheritDeform=i};function eE(t,e,r,n){for(var a=t[0],i=eN(a,"time",0),s=eN(a,"value",r)*n,o=0,h=0;;h++){e.setFrame(h,i,s);var l=t[h+1];if(!l)return e.shrink(o),e;var c=eN(l,"time",0),u=eN(l,"value",r)*n;a.curve&&(o=eV(a.curve,e,o,h,0,i,c,s,u,n)),i=c,s=u,a=l}}function e3(t,e,r,n,a,i){for(var s=t[0],o=eN(s,"time",0),h=eN(s,r,a)*i,l=eN(s,n,a)*i,c=0,u=0;;u++){e.setFrame(u,o,h,l);var d=t[u+1];if(!d)return e.shrink(c),e;var f=eN(d,"time",0),p=eN(d,r,a)*i,m=eN(d,n,a)*i,$=s.curve;$&&(c=eV($,e,c,u,0,o,f,h,p,i),c=eV($,e,c,u,1,o,f,l,m,i)),o=f,h=p,l=m,s=d}}function eV(t,e,r,n,a,i,s,o,h,l){if("stepped"==t)return e.setStepped(n),r;var c=a<<2,u=t[c],d=t[c+1]*l,f=t[c+2],p=t[c+3]*l;return e.setBezier(r,n,a,i,o,u,d,f,p,s,h),r+1}function eN(t,e,r){return void 0!==t[e]?t[e]:r}var eO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return te(e,t),e.prototype.createSkeleton=function(t){this.skeleton=new ei(t),this.skeleton.updateWorldTransform(),this.stateData=new tH(t),this.state=new tN(this.stateData)},e}(j),e4=function(t,e){return(e4=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},eW=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return function t(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}e4(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(r,t),r.prototype.createBinaryParser=function(){return new eu(null)},r.prototype.createJsonParser=function(){return new e1(null)},r.prototype.parseData=function(t,e,r,n){var a=e;a.attachmentLoader=new tj(r),t.spineData=a.readSkeletonData(n),t.spineAtlas=r},r.registerLoaderPlugin=function(){e.Loader.registerPlugin(r)},r.use=new r().genMiddleware().use,r}(K);eW.registerLoaderPlugin(),t.AlphaTimeline=tA,t.Animation=tp,t.AnimationState=tN,t.AnimationStateAdapter=t6,t.AnimationStateData=tH,t.AtlasAttachmentLoader=tj,t.Attachment=tn,t.AttachmentTimeline=tX,t.BinaryInput=$,t.Bone=tJ,t.BoneData=tK,t.BoundingBoxAttachment=ti,t.ClippingAttachment=ts,t.Color=F,t.ConstraintData=tQ,t.CurveTimeline=tg,t.CurveTimeline1=tv,t.CurveTimeline2=tx,t.DebugUtils=E,t.DeformTimeline=tP,t.DrawOrderTimeline=tD,t.Event=tZ,t.EventData=t9,t.EventQueue=t4,t.EventTimeline=tR,t.IkConstraint=et,t.IkConstraintData=ee,t.IkConstraintTimeline=t1,t.IntSet=A,t.Interpolation=P,t.JitterEffect=td,t.MathUtils=X,t.MeshAttachment=to,t.PathAttachment=th,t.PathConstraint=en,t.PathConstraintData=er,t.PathConstraintMixTimeline=tV,t.PathConstraintPositionTimeline=tE,t.PathConstraintSpacingTimeline=t3,t.PointAttachment=tl,t.Pool=V,t.Pow=R,t.PowOut=D,t.RGB2Timeline=tF,t.RGBA2Timeline=tY,t.RGBATimeline=tC,t.RGBTimeline=tI,t.RegionAttachment=tu,t.RotateTimeline=ty,t.ScaleTimeline=tk,t.ScaleXTimeline=tS,t.ScaleYTimeline=t0,t.ShearTimeline=tM,t.ShearXTimeline=tT,t.ShearYTimeline=tB,t.Skeleton=ei,t.SkeletonBinary=eu,t.SkeletonBounds=eD,t.SkeletonBoundsBase=U,t.SkeletonData=es,t.SkeletonJson=e1,t.Skin=ec,t.SkinEntry=el,t.Slot=tc,t.SlotData=eo,t.Spine=eO,t.SpineBase=j,t.SpineDebugRenderer=J,t.SpineMesh=H,t.SpineParser=eW,t.SpineSprite=G,t.StringSet=Y,t.SwirlEffect=tf,t.TextureAtlas=S,t.TextureAtlasPage=T,t.TextureAtlasRegion=B,t.TextureRegion=w,t.TimeKeeper=O,t.Timeline=t$,t.TrackEntry=tO,t.TransformConstraint=ea,t.TransformConstraintData=eh,t.TransformConstraintTimeline=tL,t.TranslateTimeline=tb,t.TranslateXTimeline=t_,t.TranslateYTimeline=tw,t.Utils=L,t.Vector2=N,t.VertexAttachment=ta,t.WindowedMean=W,t.filterFromString=x,t.settings=q,t.wrapFromString=function e(r){switch(r.toLowerCase()){case"mirroredtepeat":return t.TextureWrap.MirroredRepeat;case"clamptoedge":return t.TextureWrap.ClampToEdge;case"repeat":return t.TextureWrap.Repeat;default:throw Error("Unknown texture wrap "+r)}},Object.defineProperty(t,"__esModule",{value:!0})}),"undefined"!=typeof _pixi_spine_all_&&Object.assign(this.PIXI.spine,_pixi_spine_all_);